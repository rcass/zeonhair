(function(b,f){var c=document.createElement("script");c.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js";c.type="text/javascript";c.async="true";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(c,e);var d=wp.customize,a=true;window.onbeforeunload=function(){if(!wp.customize.state("saved")()){return themifyCustomizerControls.confirm_on_unload}};function g(i){var h=i.prev("li");return h.length>0&&h.children(".themify-control-title").length===0?g(h):h.index()}d.bind("pane-contents-reflowed",function(){f(".themify-subaccordion").each(function(){var j=f(this),h=j.data("accordion"),k=f("."+h+"-group");k.appendTo(j);var i=f(k.get().reverse());i.each(function(){if(f(this).children(".themify-control-title").length===0){var l=g(f(this));f(this).appendTo(k.eq(l).children(".themify-control-sub-accordeon").first())}})});f('li[id*="nav_menu_locations"]').each(function(){f(this).appendTo(f(this).prev().find(".themify-subaccordion"))});if(a){f("#accordion-section-themify_options:visible").find(".accordion-section-title").trigger("click");f(".themify-suba-toggle.themify-control-title").unbind("click").click(function(i){i.preventDefault();var h=f(this).closest("li").find(".themify-control-sub-accordeon");if(f(this).hasClass("topen")){f(this).removeClass("topen");h.slideUp()}else{f(this).addClass("topen");h.slideDown()}});f(".themify-control-sub-accordeon").hide();f("body").on("mouseover",".devices [data-device]",function(i){var h="Styling: "+f(this).data("device").replace("_"," ");f(this).append('<span class="themify_customize_tooltip">'+h+"</span>")}).on("mouseout",".devices [data-device]",function(h){f(this).children(".themify_customize_tooltip").remove()});f.event.trigger("themify_customizer_ready");a=false}});d.ThemifySubAccordion=d.Control.extend({ready:function(){var k=this,j=f(".themify-suba-toggle",k.container),h=j.next();f(".customize-control.customize-control-themify_subaccordion_end").remove();j.on("click",function(l){l.preventDefault();f(this).parent().toggleClass("topen");h.toggleClass("tpanelopen");if(h.hasClass("tpanelopen")){h.slideDown()}else{h.slideUp()}});var i=f('select[data-customize-setting-link^="nav_menu_locations"]',k.container);i.closest("label").map(function(){f(this).replaceWith(f(this).contents())});i.wrap('<div class="themify-customizer-brick" />').wrap('<div class="custom-select nav-menu-select" />')}});d.controlConstructor.themify_subaccordion_start=d.ThemifySubAccordion;d.ThemifyControl=d.Control.extend({value:{},field:"",openMedia:function(){var j=this,h=f(j.field,j.container),i="";f(".open-media",j.container).on("click",function(k){k.preventDefault();i=wp.media.frames.file_frame=wp.media({title:f(this).data("uploader-title"),library:{type:["image"]},button:{text:f(this).data("uploader-button-text")},multiple:false});i.on("select",function(){var o=i.state().get("selection").first().toJSON();var p=f('<a href="#" class="remove-image ti-close"></a><img src="'+o.url+'" />').css("display","inline-block");var n=f(".themify_control_preview",j.container),l=f("a",n),m=f("img",n);if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()].id=o.id;j.value[j.id][j.getCurrentDevice()].src=o.url}else{j.value[j.id].id=o.id;j.value[j.id].src=o.url}h.val(JSON.stringify(j.value[j.id])).trigger("change");if(l.length>0){l.remove()}if(m.length>0){m.remove()}n.append(p).fadeIn()});i.open()});f(".open-media-wrap",j.container).on("click",".remove-image",function(k){k.preventDefault();if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()]=_.omit(j.value[j.id][j.getCurrentDevice()],["id","src"])}else{j.value[j.id].id="";j.value[j.id].src=""}h.val(JSON.stringify(j.value[j.id])).trigger("change");f(this).next().remove();f(this).remove()})},pickColor:function(){var k=this,j=f(k.field,k.container),i=0,l=f(".color-select",k.container),h=f(".remove-color",k.container);l.minicolors({defaultValue:"",letterCase:"lowercase",opacity:true,show:function(){var m=f(this);if(m.closest("li").is(":last-child")){m.closest(".color-picker").addClass("color-picker-visible");var n=f(".wp-full-overlay-sidebar-content");n.scrollTop(n.scrollTop()+140)}},change:function(n,m){if(k.id==="headerwrap_background_ctrl"&&themifyCustomizerControls.header_transparnet&&i<1){alert(themifyCustomizerControls.header_transparnet);i++}if(k.isResponsiveStyling()){if(_.isUndefined(k.value[k.id][k.getCurrentDevice()])){k.value[k.id][k.getCurrentDevice()]={}}k.value[k.id][k.getCurrentDevice()].color=n.replace("#","");k.value[k.id][k.getCurrentDevice()].opacity=m}else{k.value[k.id].color=n.replace("#","");k.value[k.id].opacity=m}j.val(JSON.stringify(k.value[k.id])).trigger("change");h.show()},hide:function(){if(""!=f(this).val()){if(k.isResponsiveStyling()){if(_.isUndefined(k.value[k.id][k.getCurrentDevice()])){k.value[k.id][k.getCurrentDevice()]={}}k.value[k.id][k.getCurrentDevice()].color=f(this).val().replace("#","")}else{k.value[k.id].color=f(this).val().replace("#","")}j.val(JSON.stringify(k.value[k.id])).trigger("change");h.show()}var m=f(this);if(m.closest("li").is(":last-child")){m.closest(".color-picker").removeClass("color-picker-visible")}}});h.on("click",function(m){m.preventDefault();if(k.isResponsiveStyling()){if(_.isUndefined(k.value[k.id][k.getCurrentDevice()])){k.value[k.id][k.getCurrentDevice()]={}}k.value[k.id][k.getCurrentDevice()]=_.omit(k.value[k.id][k.getCurrentDevice()],"color");k.value[k.id][k.getCurrentDevice()]=_.omit(k.value[k.id][k.getCurrentDevice()],"opacity")}else{k.value[k.id]=_.omit(k.value[k.id],"color");k.value[k.id]=_.omit(k.value[k.id],"opacity")}j.val(JSON.stringify(k.value[k.id])).trigger("change");l.minicolors("value","");l.minicolors("opacity","");h.hide()})},pickBorderColor:function(){var k=this,i=f(k.field,k.container),l=f(".color-select",k.container),h=f(".remove-color",k.container),j=f(".same",k.container);l.minicolors({defaultValue:"",letterCase:"lowercase",opacity:true,change:function(p,n){var o=f(this).data("side"),m=p.replace("#","");if(j.prop("checked")){if(k.isResponsiveStyling()){if(_.isUndefined(k.value[k.id][k.getCurrentDevice()])){k.value[k.id][k.getCurrentDevice()]={}}k.value[k.id][k.getCurrentDevice()].color=m;k.value[k.id][k.getCurrentDevice()].opacity=n;k.value[k.id][k.getCurrentDevice()].same="same"}else{k.value[k.id].color=m;k.value[k.id].opacity=n;k.value[k.id].same="same"}}else{if(k.isResponsiveStyling()){if(_.isUndefined(k.value[k.id][k.getCurrentDevice()])){k.value[k.id][k.getCurrentDevice()]={}}k.value[k.id][k.getCurrentDevice()][o]=_.extend({},k.value[k.id][k.getCurrentDevice()][o],{color:m,opacity:n});if("top"===o){k.value[k.id][k.getCurrentDevice()].color=m;k.value[k.id][k.getCurrentDevice()].opacity=n}k.value[k.id][k.getCurrentDevice()].same=""}else{k.value[k.id][o]=_.extend({},k.value[k.id][o],{color:m,opacity:n});if("top"===o){k.value[k.id].color=m;k.value[k.id].opacity=n}k.value[k.id].same=""}}k.setting.set("{}",{silent:true});i.val(JSON.stringify(k.value[k.id])).trigger("change");f(this).parent().next().show()},hide:function(){if(f(this).val()){var o=f(this).val(),n=f(this).data("side"),m=o.replace("#","");if(j.prop("checked")){if(k.isResponsiveStyling()){if(_.isUndefined(k.value[k.id][k.getCurrentDevice()])){k.value[k.id][k.getCurrentDevice()]={}}k.value[k.id][k.getCurrentDevice()].color=m;k.value[k.id][k.getCurrentDevice()].same="same"}else{k.value[k.id].color=m;k.value[k.id].same="same"}}else{if(k.isResponsiveStyling()){if(_.isUndefined(k.value[k.id][k.getCurrentDevice()])){k.value[k.id][k.getCurrentDevice()]={}}k.value[k.id][k.getCurrentDevice()][n]=_.extend({},k.value[k.id][k.getCurrentDevice()][n],{color:m});if("top"===n){k.value[k.id][k.getCurrentDevice()].color=m}k.value[k.id][k.getCurrentDevice()].same=""}else{k.value[k.id][n]=_.extend({},k.value[k.id][n],{color:m});if("top"===n){k.value[k.id].color=m}k.value[k.id].same=""}}i.val(JSON.stringify(k.value[k.id])).trigger("change");f(this).parent().next().show()}}});h.on("click",function(n){n.preventDefault();var m=f(this).data("side");if(j.prop("checked")){if(k.isResponsiveStyling()){if(_.isUndefined(k.value[k.id][k.getCurrentDevice()])){k.value[k.id][k.getCurrentDevice()]={}}k.value[k.id][k.getCurrentDevice()]=_.omit(k.value[k.id][k.getCurrentDevice()],["color","opacity"]);k.value[k.id][k.getCurrentDevice()].same="same"}else{k.value[k.id].color="";k.value[k.id].opacity="";k.value[k.id].same="same"}}else{if(k.isResponsiveStyling()){if(_.isUndefined(k.value[k.id][k.getCurrentDevice()])){k.value[k.id][k.getCurrentDevice()]={}}k.value[k.id][k.getCurrentDevice()][m]=_.extend({},k.value[k.id][k.getCurrentDevice()][m],{color:"",opacity:""});if("top"===m){k.value[k.id][k.getCurrentDevice()]=_.omit(k.value[k.id][k.getCurrentDevice()],["color","opacity"])}k.value[k.id][k.getCurrentDevice()].same=""}else{k.value[k.id][m]=_.extend({},k.value[k.id][m],{color:"",opacity:""});if("top"===m){k.value[k.id].color="";k.value[k.id].opacity=""}k.value[k.id].same=""}}i.val(JSON.stringify(k.value[k.id])).trigger("change");var o=f(this).siblings(".minicolors").children(".color-select");o.minicolors("value","");o.minicolors("opacity","");f(this).hide()})},transparent:function(j){var i=this,h=f(i.field,i.container);j.on("click",function(){var k=f(this);if(k.prop("checked")){if(i.isResponsiveStyling()){if(_.isUndefined(i.value[i.id][i.getCurrentDevice()])){i.value[i.id][i.getCurrentDevice()]={}}i.value[i.id][i.getCurrentDevice()].transparent="transparent"}else{i.value[i.id].transparent="transparent"}k.parent().prev().addClass("transparent")}else{if(i.isResponsiveStyling()){if(_.isUndefined(i.value[i.id][i.getCurrentDevice()])){i.value[i.id][i.getCurrentDevice()]={}}i.value[i.id][i.getCurrentDevice()].transparent=""}else{i.value[i.id].transparent=""}k.parent().prev().removeClass("transparent")}h.val(JSON.stringify(i.value[i.id])).trigger("change")});if(j.prop("checked")){j.parent().prev().addClass("transparent")}},dropdown:function(k,h){var j=this,i=f(j.field,j.container);k.on("change",function(){if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()][h]=f("option:selected",f(this)).val()}else{j.value[j.id][h]=f("option:selected",f(this)).val()}i.val(JSON.stringify(j.value[j.id])).trigger("change")})},collapse:function(j){var i=this,h=f(i.field,i.container);j.on("click",function(){var l=f(this);if(l.prop("checked")){i.value[i.id].disabled="disabled";l.parent().siblings(".themify-customizer-brick").stop().slideUp()}else{i.value[i.id].disabled="";var k=l.parent().parent().find('input[type="checkbox"].same');if(k.length>0&&k.prop("checked")){l.parent().siblings(".useforall, .collapse-same").stop().slideDown()}else{l.parent().siblings(".themify-customizer-brick").stop().slideDown()}}h.val(JSON.stringify(i.value[i.id])).trigger("change")});if(j.prop("checked")){j.parent().siblings(".themify-customizer-brick").hide()}},input:function(k,h){var j=this,i=f(j.field,j.container);k.on("keyup",function(){if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()][h]=f(this).val()}else{j.value[j.id][h]=f(this).val()}i.val(JSON.stringify(j.value[j.id])).trigger("change")})},dimension:function(j){var i=this,h=f(i.field,i.container);j.on("keyup",function(){i.value[i.id].width=f(this).val();h.val(JSON.stringify(i.value[i.id])).trigger("change")})},dimensionSame:function(k){var j=this,h=f(j.field,j.container),i=f(".same",j.container);k.on("keyup",function(){var l=f(this).data("side"),m=f(this).val();if(i.prop("checked")){if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()].width=m;j.value[j.id][j.getCurrentDevice()].same="same"}else{j.value[j.id].width=m;j.value[j.id].same="same"}}else{if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()][l]=_.extend({},j.value[j.id][j.getCurrentDevice()][l],{width:m});if("top"===l){j.value[j.id][j.getCurrentDevice()].width=m}j.value[j.id][j.getCurrentDevice()].same=""}else{j.value[j.id][l]=_.extend({},j.value[j.id][l],{width:m});if("top"===l){j.value[j.id].width=m}j.value[j.id].same=""}}h.val(JSON.stringify(j.value[j.id])).trigger("change")})},auto:function(k){var j=this,i=f(j.field,j.container),h=k.data("hide");k.on("click",function(){var l=f(this);if(l.prop("checked")){j.value[j.id].auto="auto";f(j.container).find("."+h).stop().addClass("hide-horizontally")}else{j.value[j.id].auto="";f(j.container).find("."+h).stop().removeClass("hide-horizontally")}i.val(JSON.stringify(j.value[j.id])).trigger("change")});if(k.prop("checked")){f(j.container).find("."+h).addClass("hide-horizontally")}},autoSame:function(k){var j=this,h=f(j.field,j.container),i=f(".same",j.container);k.on("click",function(){var o=f(this),m=o.data("hide"),l=f(this).data("side"),n={};if(i.prop("checked")){if(o.prop("checked")){n.auto="auto";if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()].auto="auto";j.value[j.id][j.getCurrentDevice()].top=_.extend({},j.value[j.id][j.getCurrentDevice()].top,n)}else{j.value[j.id].auto="auto";j.value[j.id].top=_.extend({},j.value[j.id].top,n)}f(j.container).find("."+m).stop().addClass("hide-horizontally")}else{n.auto="";if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()].auto="";j.value[j.id][j.getCurrentDevice()].top=_.extend({},j.value[j.id][j.getCurrentDevice()].top,n)}else{j.value[j.id].auto="";j.value[j.id].top=_.extend({},j.value[j.id].top,n)}f(j.container).find("."+m).stop().removeClass("hide-horizontally")}if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()].same="same"}else{j.value[j.id].same="same"}}else{if(o.prop("checked")){n.auto="auto";if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()][l]=_.extend({},j.value[j.id][j.getCurrentDevice()][l],n);if("top"===l){j.value[j.id][j.getCurrentDevice()].auto="auto"}}else{j.value[j.id][l]=_.extend({},j.value[j.id][l],n);if("top"===l){j.value[j.id].auto="auto"}}f(j.container).find("."+m).stop().addClass("hide-horizontally")}else{n.auto="";if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()][l]=_.extend({},j.value[j.id][j.getCurrentDevice()][l],n);if("top"===l){j.value[j.id][j.getCurrentDevice()].auto=""}}else{j.value[j.id][l]=_.extend({},j.value[j.id][l],n);if("top"===l){j.value[j.id].auto=""}}f(j.container).find("."+m).stop().removeClass("hide-horizontally")}if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()].same=""}else{j.value[j.id].same=""}}h.val(JSON.stringify(j.value[j.id])).trigger("change")});k.each(function(){var m=f(this),l=m.data("hide");if(m.prop("checked")){f(j.container).find("."+l).addClass("hide-horizontally")}})},dropdownSame:function(l,h){var k=this,i=f(k.field,k.container),j=f(".same",k.container);l.on("change",function(){var m=f(this).data("side"),o=f("option:selected",f(this)).val();if(j.prop("checked")){if(k.isResponsiveStyling()){if(_.isUndefined(k.value[k.id][k.getCurrentDevice()])){k.value[k.id][k.getCurrentDevice()]={}}k.value[k.id][k.getCurrentDevice()][h]=o;k.value[k.id][k.getCurrentDevice()].same="same"}else{k.value[k.id][h]=o;k.value[k.id].same="same"}}else{var n={};n[h]=o;if(k.isResponsiveStyling()){if(_.isUndefined(k.value[k.id][k.getCurrentDevice()])){k.value[k.id][k.getCurrentDevice()]={}}k.value[k.id][k.getCurrentDevice()][m]=_.extend({},k.value[k.id][k.getCurrentDevice()][m],n);if("top"===m){k.value[k.id][k.getCurrentDevice()][h]=o}k.value[k.id][k.getCurrentDevice()].same=""}else{k.value[k.id][m]=_.extend({},k.value[k.id][m],n);if("top"===m){k.value[k.id][h]=o}k.value[k.id].same=""}}i.val(JSON.stringify(k.value[k.id])).trigger("change")})},dropdownBorderSame:function(k){var j=this,h=f(j.field,j.container),i=f(".same",j.container);k.on("change",function(){var n=f(this),l=n.data("side"),m=f("option:selected",n).val();if(i.prop("checked")){if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()].style=m;j.value[j.id][j.getCurrentDevice()].same="same"}else{j.value[j.id].style=m;j.value[j.id].same="same"}}else{if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()][l]=_.extend({},j.value[j.id][j.getCurrentDevice()][l],{style:m});if("top"===l){j.value[j.id][j.getCurrentDevice()].style=m}j.value[j.id][j.getCurrentDevice()].same=""}else{j.value[j.id][l]=_.extend({},j.value[j.id][l],{style:m});if("top"===l){j.value[j.id].style=m}j.value[j.id].same=""}}h.val(JSON.stringify(j.value[j.id])).trigger("change");if("none"===m){n.parent().siblings(".color-picker, .border-width, .dimension-unit-label").hide()}else{n.parent().siblings(".color-picker, .border-width, .dimension-unit-label").show()}});k.each(function(){var m=f(this),l=f("option:selected",m).val();if("none"===l){m.parent().siblings(".color-picker, .border-width, .dimension-unit-label").hide()}else{m.parent().siblings(".color-picker, .border-width, .dimension-unit-label").show()}})},hideComponentsSame:function(m){var l=this,j=f(l.field,l.container),i=f(".component",l.container),k=f(".dimension-row-label:not(.same-label)",l.container),h=m.parent().parent().find(".same-label");m.on("click",function(){var n=f(this);if(n.prop("checked")){if(l.isResponsiveStyling()){if(_.isUndefined(l.value[l.id][l.getCurrentDevice()])){l.value[l.id][l.getCurrentDevice()]={}}l.value[l.id][l.getCurrentDevice()].same="same"}else{l.value[l.id].same="same"}i.stop().slideUp();k.hide();h.text(h.data("same"))}else{if(l.isResponsiveStyling()){if(_.isUndefined(l.value[l.id][l.getCurrentDevice()])){l.value[l.id][l.getCurrentDevice()]={}}l.value[l.id][l.getCurrentDevice()].same=""}else{l.value[l.id].same=""}i.stop().slideDown();k.show();h.text(h.data("notsame"))}j.val(JSON.stringify(l.value[l.id])).trigger("change")});if(m.prop("checked")){i.hide();k.hide();h.text(h.data("same"))}},getSelectedData:function(l,j,i){var k=f(".selected",l),h=k.data(j);return h?h:i},fontStyle:function(h){var j=this,i=f(j.field,j.container);f(".button",h).on("click",function(){var k=f(this).data("style");if("underline"===k){f('.button.selected[data-style="linethrough"]',h).removeClass("selected")}if("linethrough"===k){f('.button.selected[data-style="underline"]',h).removeClass("selected")}if("italic"===k){f('.button.selected[data-style="normal"]',h).removeClass("selected")}if("normal"===k){f('.button.selected[data-style="italic"]',h).removeClass("selected")}if("nostyle"===k){f('.button:not([data-style="nostyle"])',h).removeClass("selected")}if("nostyle"!==k){f('.button[data-style="nostyle"]',h).removeClass("selected")}f(this).toggleClass("selected");if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}f(".button",h).each(function(){j.value[j.id][j.getCurrentDevice()][f(this).data("style")]=f(this).hasClass("selected")?f(this).data("style"):""})}else{f(".button",h).each(function(){j.value[j.id][f(this).data("style")]=f(this).hasClass("selected")?f(this).data("style"):""})}i.val(JSON.stringify(j.value[j.id])).trigger("change")})},textTransform:function(i){var j=this,h=f(j.field,j.container);f(".button",i).on("click",function(){var k=f(this).data("texttransform");f(".button",i).not(this).removeClass("selected");f(this).toggleClass("selected");if("notexttransform"===k){f('.button:not([data-texttransform="notexttransform"])',i).removeClass("selected")}else{f('.button[data-texttransform="notexttransform"]',i).removeClass("selected")}if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()].texttransform=j.getSelectedData(i,"texttransform")}else{j.value[j.id].texttransform=j.getSelectedData(i,"texttransform")}h.val(JSON.stringify(j.value[j.id])).trigger("change")})},textAlign:function(i){var j=this,h=f(j.field,j.container);f(".button",i).on("click",function(){var k=f(this).data("align");f(".button",i).not(this).removeClass("selected");f(this).toggleClass("selected");if("noalign"===k){f('.button:not([data-align="noalign"])',i).removeClass("selected")}if("noalign"!==k){f('.button[data-align="noalign"]',i).removeClass("selected")}if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()].align=j.getSelectedData(i,"align")}else{j.value[j.id].align=j.getSelectedData(i,"align")}h.val(JSON.stringify(j.value[j.id])).trigger("change")})},fontFamily:function(j){var i=this,h=f(i.field,i.container);j.on({change:function(){var m=f(this).closest("li").find(".font_weight_select"),l=m.length>0?f(this).find("option:selected").data("variants"):false;if(i.isResponsiveStyling()){if(_.isUndefined(i.value[i.id][i.getCurrentDevice()])){i.value[i.id][i.getCurrentDevice()]={}}i.value[i.id][i.getCurrentDevice()].family=f.parseJSON(f("option:selected",f(this)).val())}else{i.value[i.id].family=f.parseJSON(f("option:selected",f(this)).val())}if(l){l=f.trim(l).split(",");m.find("option").each(function(){if(f.inArray(f(this).val(),l)===-1){f(this).hide()}else{f(this).show()}});var k=m.find("option:selected");if(!k.is(":visible")){k.prop("selected",false);m.find("option").each(function(){if(f(this).css("display")!="none"){f(this).prop("selected",true).trigger("change");return false}})}}else{m.find("option").show()}h.val(JSON.stringify(i.value[i.id])).trigger("change");f("#themify_font_preview").hide()},focusin:function(){var k=f(this).data("selected");if(f(".themify_add_fonts").length>0){var l=f(".themify_add_fonts").html(),o=f(l);o.find("option").removeAttr("selected");if(k){o.find('option[data-value="'+k+'"]').attr("selected","selected")}f(this).html(o)}else{f("body").append('<span id="themify_font_preview"><span class="themify_font_wait"></span>Font Preview</span>');var m=f.parseJSON(decodeURI(f("#themify_fonts_hidden").val())),u=m.google,q=m.fonts,l="";m=null;for(var s in q){var t=q[s].value,n=k&&k==t?'selected="selected"':"";t=i.escapeHtml(t);var r='{"fonttype":"websafe","name":"'+t+'"}';l+="<option "+n+" data-value='"+t+"' value='"+r+"'>"+q[s].name+"</option>"}q=null;f(this).children("optgroup").first().html(l);l="";for(var s in u){var t=u[s].name,n=k&&k==t?'selected="selected"':"";r='{"fonttype":"google"';if(u[s].subsets){r+=',"subsets":"'+i.escapeHtml(u[s].subsets)+"'"}t=i.escapeHtml(t);r+=',"name":"'+t+'"}';l+="<option data-variants='"+u[s].variant+"' data-value='"+t+"' class='google_font' "+n+"  value='"+r+"'>"+u[s].name+"</option>"}u=null;f(this).children("optgroup").last().html(l);f(this).addClass("themify_add_fonts");f("#themify_fonts_hidden").remove();i.fontHover()}var p=f(this);p.off("focusin");p.scombobox({wrap:true,reassignId:false,empty:k?false:true,showDropDown:true,beforeClose:function(){f("#themify_font_preview").hide()},afterClose:function(){var v=p.closest(".scombobox").find(".scombobox-display");if(!f.trim(v.val())){p.data("selected","").find("option:selected").prop("selected",false).trigger("change")}if(f("#themify_font_preview").is(":visible")&&!p.find(".scombobox-list").is(":visible")){f("#themify_font_preview").hide()}}})}})},escapeHtml:function(h){var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return h.replace(/[&<>"']/g,function(j){return i[j]})},fontHover:function(){f(".themify_combobox").delegate(".scombobox-list p","hover",function(j){j.stopImmediatePropagation();var i=f("#themify_font_preview");if(f(this).data("value")&&f(this).is(":visible")){var k=f.parseJSON(f(this).data("value")),h=f(this).offset();i.css({top:h.top-7,left:h.left+260});if(k.fonttype==="google"&&!f(this).hasClass("themify_font_loaded")){f(".themify_combobox .scombobox-list p").removeClass("current");f(this).addClass("current");i.addClass("themify_show_wait");setTimeout(function(){var m=f(".themify_combobox p.current");if(m.closest(".scombobox-list").is(":visible")){var n=f.parseJSON(m.data("value")),l=m.offset();i.css({top:l.top-7,left:l.left+260}).show();WebFont.load({google:{families:[n.name]},fontloading:function(p,o){i.css("font-family",p).removeClass("themify_show_wait");m.addClass("themify_font_loaded")}})}else{i.hide()}},800)}else{i.css("font-family",k.name).removeClass("themify_show_wait").show()}}else{i.hide()}})},inputOption:function(l,h){var j=this,i=f(j.field,j.container),k;l.on("keyup",function(){var m=f(this).val();if("blogname"===h){f(".customize-control-themify_logo").find(".site-name").each(function(){f(this).val(m)})}clearTimeout(k);k=setTimeout(function(){f.post(ajaxurl,{action:"themify_customizer_save_option",option:h,value:m,nonce:themifyCustomizerControls.nonce},function(n){if("saved"===n){j.value[j.id].stamp=new Date().getTime();i.val(JSON.stringify(j.value[j.id])).trigger("change")}})},750)})},saveOption:function(h,i){var j=this;f.post(ajaxurl,{action:"themify_customizer_save_option",option:h,value:i,nonce:themifyCustomizerControls.nonce},function(k){if("saved"===k){j.saveOptionCallback()}})},saveOptionCallback:function(){},changeMode:function(h){var j=this,i=f(j.field,j.container);f(h+"-mode",j.container).each(function(){f(this).on("click",function(){var k=f(this);f(h+"-mode-wrap",j.container).hide();f(h+"-"+k.val()+"-mode",j.container).show();j.value[j.id].mode=k.val();i.val(JSON.stringify(j.value[j.id])).trigger("change")})});f(h+"-mode-wrap",j.container).hide();f(h+"-"+f('input[type="radio"]'+h+"-mode:checked").val()+"-mode",j.container).show()},addQueryArg:function(o,p,h){h=h||window.location.href;var k,m=new RegExp("([?&])"+o+"=.*?(&|#|$)(.*)","gi");if(m.test(h)){return"undefined"!==typeof p&&null!==p?h.replace(m,"$1"+o+"="+p+"$2$3"):(k=h.split("#"),h=k[0].replace(m,"$1$3").replace(/(&|\?)$/,""),"undefined"!==typeof k[1]&&null!==k[1]&&(h+="#"+k[1]),h)}if("undefined"!==typeof p&&null!==p){var j=-1!==h.indexOf("?")?"&":"?";return k=h.split("#"),h=k[0]+j+o+"="+p,"undefined"!==typeof k[1]&&null!==k[1]&&(h+="#"+k[1]),h}return h},getParameterByName:function(i,h){if(!h){h=window.location.href}i=i.replace(/[\[\]]/g,"\\$&");var k=new RegExp("[?&]"+i+"(=([^&#]*)|&|#|$)"),j=k.exec(h);if(!j){return null}if(!j[2]){return""}return decodeURIComponent(j[2].replace(/\+/g," "))},isResponsiveStyling:function(){return"desktop"!==d.previewedDevice.get()},getCurrentDevice:function(){return d.previewedDevice.get()}});d.ThemifyFont=d.ThemifyControl.extend({field:".themify_font_control",ready:function(){var i=this,h=f(i.field,i.container);i.value[i.id]=h.val()?f.parseJSON(h.val()):{};i.collapse(f(".disable-control",i.container));i.fontFamily(f(".themify_font_family",i.container));i.input(f(".font_size_num",i.container),"sizenum");i.dropdown(f(".font_size_unit",i.container),"sizeunit");i.input(f(".font_line_num",i.container),"linenum");i.dropdown(f(".font_line_unit",i.container),"lineunit");i.dropdown(f(".font_weight_select",i.container),"weight");i.fontStyle(f(".themify_font_style",i.container));i.textTransform(f(".themify_text_transform",i.container));i.textAlign(f(".themify_font_align",i.container))}});d.controlConstructor.themify_font=d.ThemifyFont;d.controlConstructor.themify_text_decoration=d.ThemifyFont;d.ThemifyLogo=d.ThemifyControl.extend({field:".themify_logo_control",ready:function(){var i=this,h=f(i.field,i.container);i.value[i.id]=h.val()?f.parseJSON(h.val()):{};i.changeMode(".logo");i.inputOption(f(".site-name",i.container),"blogname");i.input(f(".site-link",i.container),"link");i.openMedia();i.input(f(".img-width",i.container),"imgwidth");i.input(f(".img-height",i.container),"imgheight");i.collapse(f(".disable-control",i.container));i.fontFamily(f(".themify_font_family",i.container));i.input(f(".font_size_num",i.container),"sizenum");i.dropdown(f(".font_size_unit",i.container),"sizeunit");i.input(f(".font_line_num",i.container),"linenum");i.dropdown(f(".font_line_unit",i.container),"lineunit");i.dropdown(f(".font_weight_select",i.container),"weight");i.fontStyle(f(".themify_font_style",i.container));i.textTransform(f(".themify_text_transform",i.container));i.textAlign(f(".themify_font_align",i.container));i.pickColor()}});d.controlConstructor.themify_logo=d.ThemifyLogo;d.ThemifyTagline=d.ThemifyControl.extend({field:".themify_tagline_control",ready:function(){var i=this,h=f(i.field,i.container);i.value[i.id]=h.val()?f.parseJSON(h.val()):{};i.changeMode(".tagline");i.inputOption(f(".site-description",i.container),"blogdescription");i.openMedia();i.input(f(".img-width",i.container),"imgwidth");i.input(f(".img-height",i.container),"imgheight");i.collapse(f(".disable-control",i.container));i.fontFamily(f(".themify_font_family",i.container));i.input(f(".font_size_num",i.container),"sizenum");i.dropdown(f(".font_size_unit",i.container),"sizeunit");i.input(f(".font_line_num",i.container),"linenum");i.dropdown(f(".font_line_unit",i.container),"lineunit");i.dropdown(f(".font_weight_select",i.container),"weight");i.fontStyle(f(".themify_font_style",i.container));i.textTransform(f(".themify_text_transform",i.container));i.textAlign(f(".themify_font_align",i.container));i.pickColor()}});d.controlConstructor.themify_tagline=d.ThemifyTagline;d.ThemifyBackground=d.ThemifyControl.extend({field:".themify_background_control",noImage:function(k){var j=this,h=f(j.field,j.container),i=f(".open-media-wrap, .image-label, .background-style, .background-position",j.container);k.on("click",function(){var l=f(this);if(l.prop("checked")){if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()].noimage="noimage"}else{j.value[j.id].noimage="noimage"}i.stop().slideUp()}else{if(j.isResponsiveStyling()){if(_.isUndefined(j.value[j.id][j.getCurrentDevice()])){j.value[j.id][j.getCurrentDevice()]={}}j.value[j.id][j.getCurrentDevice()].noimage=""}else{j.value[j.id].noimage=""}i.stop().slideDown()}h.val(JSON.stringify(j.value[j.id])).trigger("change")});if(k.prop("checked")){i.hide()}},ready:function(){var i=this,h=f(i.field,i.container);i.value[i.id]=h.val()?f.parseJSON(h.val()):{};i.noImage(f(".disable-control",i.container));i.openMedia();i.dropdown(f(".image-style",i.container),"style");i.dropdown(f(".position-style",i.container),"position");i.pickColor();i.transparent(f(".color-transparent",i.container))}});d.controlConstructor.themify_background=d.ThemifyBackground;d.ThemifyColor=d.ThemifyControl.extend({field:".themify_color_control",ready:function(){var i=this,h=f(i.field,i.container);i.value[i.id]=h.val()?f.parseJSON(h.val()):{};i.pickColor();i.transparent(f(".color-transparent",i.container))}});d.controlConstructor.themify_color=d.ThemifyColor;d.ThemifyImage=d.ThemifyBackground.extend({field:".themify_image_control",ready:function(){var i=this,h=f(i.field,i.container);i.value[i.id]=h.val()?f.parseJSON(h.val()):{};i.input(f(".img-width",i.container),"imgwidth");i.input(f(".img-height",i.container),"imgheight");i.openMedia()}});d.controlConstructor.themify_image=d.ThemifyImage;d.ThemifyBorder=d.ThemifyControl.extend({field:".themify_border_control",ready:function(){var j=this,i=f(j.field,j.container);if(i.val()){j.value[j.id]=f.parseJSON(i.val())}else{var h={color:"",opacity:"",style:"",width:""};j.value[j.id]={};j.value[j.id].top=h;j.value[j.id].left=h;j.value[j.id].bottom=h;j.value[j.id].right=h}j.collapse(f(".disable-control",j.container));j.pickBorderColor();j.dropdownBorderSame(f(".border-style",j.container));j.dimensionSame(f(".dimension-width",j.container));j.hideComponentsSame(f(".same",j.container))}});d.controlConstructor.themify_border=d.ThemifyBorder;d.ThemifyMargin=d.ThemifyControl.extend({field:".themify_margin_control",ready:function(){var j=this,i=f(j.field,j.container);if(i.val()){j.value[j.id]=f.parseJSON(i.val())}else{var h={width:"",unit:"px"};j.value[j.id]={};j.value[j.id].top=h;j.value[j.id].left=h;j.value[j.id].bottom=h;j.value[j.id].right=h}j.collapse(f(".disable-control",j.container));j.dimensionSame(f(".dimension-width",j.container));j.dropdownSame(f(".dimension-unit",j.container),"unit");j.autoSame(f(".auto-prop",j.container));j.hideComponentsSame(f(".same",j.container))}});d.controlConstructor.themify_margin=d.ThemifyMargin;d.ThemifyPadding=d.ThemifyMargin.extend({field:".themify_padding_control"});d.controlConstructor.themify_padding=d.ThemifyPadding;d.ThemifyWidth=d.ThemifyControl.extend({field:".themify_width_control",ready:function(){var i=this,h=f(i.field,i.container);if(h.val()){i.value[i.id]=f.parseJSON(h.val())}else{i.value[i.id]={width:"",unit:"px",auto:""}}i.dimension(f(".dimension-width",i.container));i.dropdown(f(".dimension-unit",i.container),"unit");i.auto(f(".auto-prop",i.container))}});d.controlConstructor.themify_width=d.ThemifyWidth;d.ThemifyHeight=d.ThemifyWidth.extend({field:".themify_height_control"});d.controlConstructor.themify_height=d.ThemifyHeight;d.ThemifyPosition=d.ThemifyControl.extend({field:".themify_position_control",dropdownPosition:function(l,i){var k=this,j=f(k.field,k.container),h=l.find("option:selected").val();l.on("change",function(){var m=f(this),n=f("option:selected",m).val();k.value[k.id][i]=n;j.val(JSON.stringify(k.value[k.id])).trigger("change");if(n&&"static"!==n){m.closest(".themify-customizer-brick").parent().find(".position-wrap").show()}else{m.closest(".themify-customizer-brick").parent().find(".position-wrap").hide()}});if(h&&"static"!==h){l.closest(".themify-customizer-brick").parent().find(".position-wrap").show()}else{l.closest(".themify-customizer-brick").parent().find(".position-wrap").hide()}},ready:function(){var i=this,h=f(i.field,i.container);i.value[i.id]=h.val()?f.parseJSON(h.val()):{position:""};i.dropdownPosition(f(".position",i.container),"position");i.dimensionSame(f(".dimension-width",i.container));i.dropdownSame(f(".dimension-unit",i.container),"unit");i.autoSame(f(".auto-prop",i.container))}});d.controlConstructor.themify_position=d.ThemifyPosition;d.ThemifyCustomCSS=d.ThemifyControl.extend({field:".themify_customcss_control",expand:function(h,j){var i=j.closest(".themify-customizer-brick");f(".themify-expand",h).on("click",function(l){l.preventDefault();var k=f('<div class="customize-control customcss-expand"><a class="themify-contract ti ti-close"></a><textarea class="customcss">'+j.val()+"</textarea></div>").hide();i.stop().slideUp();k.prependTo(f("#widgets-right")).slideDown();k.find(".customcss").on("keyup paste",function(m){if("paste"===m.type){setTimeout(function(){j.val(f(this).val()).trigger("keyup")},1)}else{j.val(f(this).val()).trigger("keyup")}});k.find(".themify-contract").on("click",function(m){m.preventDefault();f(this).off("click").closest(".customize-control").remove();k.find(".customcss").off("keyup paste");i.stop().slideDown()})})},ready:function(){var j=this,h=f(j.field,j.container),i=f(".customcss",j.container);j.value[j.id]=h.data("value")?window.atob(h.data("value")):"";h.data("value","");h.val(j.value[j.id]);j.expand(j.container,i)}});d.controlConstructor.themify_customcss=d.ThemifyCustomCSS;d.ThemifyImageSelect=d.ThemifyControl.extend({field:".themify_image_select_control",ready:function(){var i=this,h=f(i.field,i.container);if(h.val()){i.value[i.id]=f.parseJSON(h.val())}else{i.value[i.id]={type:"",selected:""}}f(".image-select",i.container).on("click",function(j){j.preventDefault();i.value[i.id].selected=f(this).data("option");h.val(JSON.stringify(i.value[i.id])).trigger("change")})}});d.controlConstructor.themify_image_select=d.ThemifyImageSelect;d.ThemifyTools=d.ThemifyControl.extend({field:".themify_tools_control",clearing:false,saveOptionCallback:function(){f("#customize-header-actions").find(".save").trigger("click")},ready:function(){var h=this;d.bind("saved",function(){if(d.ThemifyTools.field){if("true"===h.getParameterByName("cleared")){window.location.reload()}else{var j=h.addQueryArg("cleared","true",(window.top.location.href));j=(j[j.length-1]=="#")?j.replace("#",""):j;console.log(j);window.top.location=j}d.ThemifyTools.field=false}});f(".clearall",h.container).on("click",function(){if(window.confirm(themifyCustomizerControls.clearMessage)){d.ThemifyTools.field=true;f(".themify-customizer-value-field").each(function(){f(this).val("").trigger("change")});d.previewer.send("themify-customize-clearall");var m=f(".customize-control-themify_logo").find(".site-name").val(),j=f(".customize-control-themify_tagline").find(".site-name").val(),l=f(this).data("sitename"),k=f(this).data("tagline");if(m!=l||j!=k){h.saveOption("blogname",l);h.saveOption("blogdescription",k)}else{h.saveOptionCallback()}}});f(".customize-export",h.container).on("click",function(j){if(f("#customize-header-actions").find(".save").val()!="Saved"){if(!window.confirm(themifyCustomizerControls.exportMessage)){j.preventDefault()}}});var i=f(".customize-import .plupload-upload-uic");themify_create_pluploader(i);i.find(".plupload-button").css({padding:"0px",border:"none",color:"inherit",background:"none",margin:"0px","font-family":"inherit","font-size":"inherit","box-shadow":"none","font-weight":"inherit",height:"inherit"})}});d.controlConstructor.themify_tools=d.ThemifyTools})(wp,jQuery);