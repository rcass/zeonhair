!function(a){"function"==typeof define&&define.amd?define(["jquery","videojs","imagesloaded","jquery-ui"],a):a(jQuery,videojs)}(function(a,b){a.BigVideo=function(X,H){function N(){var h=a("body"),f=i.find(".big-video-wrap"),c=f.width(),j=f.height(),g=c/j;o.container.is(h)&&a("html,body").css("height",a(window).height()>h.css("height","auto").height()?"100%":"auto"),O>g?"video"===V?(W.width(j*O).height(j),o.shrinkable?E.css("top",-(c/O-j)/2).css("left",0).css("height",c/O):E.css("top",0).css("left",-(j*O-c)/2).css("height",j),i.find(G+"_html5_api").css("width",j*O).css("height",j),i.find("object[id*=_flash_api]").parent().css("width",a(window).height()*O).css("height",a(window).height()),i.find("video").css("width","")):i.find(".big-video-image").css({width:"auto",height:j,top:0,left:-(j*O-c)/2}):"video"===V?(W.width(c).height(c/O),E.css("top",-(c/O-j)/2).css("left",0).css("height",c/O),i.find(G+"_html5_api").css("width",i.find(G+"_html5_api").parent().width()+"px").css("height","auto"),i.find("object[id*=_flash_api]").parent().css("width",a(window).width()).css("height",a(window).width()/O),i.find("video").css("width","100%")):i.find(".big-video-image").css({width:c,height:"auto",top:-(c/O-j)/2,left:0})}function Y(){var c=['<div class="big-video-control-container">','<div class="big-video-control">','<a href="#" class="big-video-control-play"></a>','<div class="big-video-control-middle">','<div class="big-video-control-bar">','<div class="big-video-control-bound-left"></div>','<div class="big-video-control-progress"></div>','<div class="big-video-control-track"></div>','<div class="big-video-control-bound-right"></div>',"</div>","</div>",'<div class="big-video-control-timer"></div>',"</div>","</div>"].join("");i.append(c),i.find(".big-video-control-container").css("display","none"),i.find(".big-video-control-timer").css("display","none"),i.find(".big-video-control-track").slider({animate:!0,step:0.01,slide:function(d,e){R=!0,i.find(".big-video-control-progress").css("width",e.value-0.16+"%"),W.currentTime(e.value/100*W.duration())},stop:function(d,e){R=!1,W.currentTime(e.value/100*W.duration())}}),i.find(".big-video-control-bar").click(function(d){W.currentTime(d.offsetX/a(this).width()*W.duration())}),i.find(".big-video-control-play").click(function(d){d.preventDefault(),ab("toggle")}),W.on("timeupdate",function(){if(!R&&W.currentTime()/W.duration()){var f=W.currentTime(),h=Math.floor(f/60),g=Math.floor(f)-60*h;10>g&&(g="0"+g);var d=W.currentTime()/W.duration()*100;i.find(".big-video-control-track").slider("value",d),i.find(".big-video-control-progress").css("width",d-0.16+"%"),i.find(".big-video-control-timer").text(h+":"+g+"/"+z)}})}function ab(c){var d=c||"toggle";"toggle"===d&&(d=Q?"pause":"play"),"pause"===d?(W.pause(),i.find(".big-video-control-play").css("background-position","-16px"),Q=!1):"play"===d?(W.play(),i.find(".big-video-control-play").css("background-position","0"),Q=!0):"skip"===d&&J()}function I(){W.play(),o.container.off("click",I)}function J(){D++,D===K.length&&(D=0),Z(K[D])}function Z(c){E.css("display","block"),V="video",W.src(c),Q=!0,q?(i.find(".big-video-control-container").css("display","none"),W.ready(function(){W.volume(0)}),doLoop=!0):(i.find(".big-video-control-container").css("display","block"),W.ready(function(){W.volume(C)}),doLoop=!0),i.find(".big-video-image").css("display","none"),E.css("display","block")}function P(d){i.find(".big-video-image").remove(),W.pause(),E.css("display","none"),i.find(".big-video-control-container").css("display","none"),V="image";var c=a('<img class="big-video-image" src='+d+" />");aa.append(c),i.find(".big-video-image").imagesLoaded(function(){O=i.find(".big-video-image").width()/i.find(".big-video-image").height(),N()})}var W,D,V,U={useFlashForFirefox:!1,forceAutoplay:!1,controls:!1,doLoop:!0,ambient:!0,container:a(H?H:"body"),shrinkable:!1,poster:""},M=this,G=".big-video-vid",aa=a('<div class="big-video-wrap"></div>'),O=(a(""),16/9),z=0,C=0.8,ac=!1,R=!1,Q=!1,B=!1,q=!1,K=[],o=a.extend({},U,X),i=o.container,E=i.find(G);q=o.ambient,M.init=function(){if(!ac){o.container.prepend(aa);var g=o.forceAutoplay?"autoplay":"";W=a('<video class="'+G.substr(1)+'" class="video-js vjs-default-skin" preload="auto" data-setup="{}" '+g+' webkit-playsinline poster="'+o.poster+'"></video>'),W.css("position","absolute"),aa.append(W),E=i.find(G);var f=["html5","flash"],d=navigator.userAgent.toLowerCase(),h=-1!=d.indexOf("firefox");o.useFlashForFirefox&&h&&(f=["flash","html5"]),W=b(E[0],{controls:!1,autoplay:!0,preload:"auto",techOrder:f}),o.controls&&Y(),N(),ac=!0,Q=!1,o.forceAutoplay&&a("body").on("click",I),i.find("object[id*=_flash_api]").attr("scale","noborder").attr("width","100%").attr("height","100%"),a(window).on("resize.bigvideo",function(){N()}),W.on("playing",function(c){"undefined"!=typeof tbLocalScript&&""===tbLocalScript.isTouch&&-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&a(c.target).attr("poster","")}),W.on("loadedmetadata",function(){O=i.find("object[id*=_flash_api]").length?i.find("object[id*=_flash_api]")[0].vjs_getProperty("videoWidth")/i.find("object[id*=_flash_api]")[0].vjs_getProperty("videoHeight"):i.find("video").prop("videoWidth")/i.find("video").prop("videoHeight"),N();var c=Math.round(W.duration()),k=Math.floor(c/60),j=c-60*k;10>j&&(j="0"+j),z=k+":"+j}),W.on("ended",function(){o.doLoop&&(W.currentTime(0),W.play()),B&&J()})}},M.show=function(c,f){if(void 0===f&&(f={}),c||""===i.data("video")||(c=i.data("video")),q=f.ambient?f.ambient===!0:o.ambient,q&&f.doLoop&&(o.doLoop=!0),"string"==typeof c){var d=c.substring(c.lastIndexOf(".")+1);"jpg"===d||"gif"===d||"png"===d?P(c):(f.altSource&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(c=f.altSource),Z(c),f.onShown&&f.onShown(),B=!1)}else{K=c,D=0,Z(K[D]),f.onShown&&f.onShown(),B=!0}},M.getPlayer=function(){return W},M.remove=M.dispose=function(){ac=!1,aa.remove(),a(window).off("resize.bigvideo"),W&&(W.off("loadedmetadata"),W.off("ended"),W.dispose())},M.triggerPlayer=function(c){ab(c)}},a.fn.bigvideo=function(d){if("string"==typeof d){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var e=a.data(this,"bigvideo");return e?a.isFunction(e[d])&&"_"!==d.charAt(0)?void e[d].apply(e,c):void a.error('No such method "'+d+'" for bigvideo instance'):void a.error('Cannot call methods on bigvideo prior to initialization; Attempted to call method "'+d+'"')})}else{this.each(function(){a.data(this,"bigvideo",new a.BigVideo(d,this))})}return this}});