var ThemifyGallery={};(function(a){ThemifyGallery={config:{fullscreen:themifyScript.lightbox.fullscreenSelector,lightbox:themifyScript.lightbox.lightboxSelector,lightboxGallery:themifyScript.lightbox.gallerySelector,lightboxContentImages:themifyScript.lightbox.lightboxContentImagesSelector,is_touch:a("body").hasClass("touch"),context:document},init:function(b){if(b&&typeof b=="object"){a.extend(ThemifyGallery.config,b)}if(b.extraLightboxArgs&&typeof b=="object"){for(var c in b.extraLightboxArgs){themifyScript.lightbox[c]=b.extraLightboxArgs[c]}}this.parseArgs();this.doLightbox()},parseArgs:function(){a.each(themifyScript.lightbox,function(b,c){if("false"==c||"true"==c){themifyScript.lightbox[b]="false"!=c}else{if(parseInt(c)){themifyScript.lightbox[b]=parseInt(c)}else{if(parseFloat(c)){themifyScript.lightbox[b]=parseFloat(c)}}}})},doLightbox:function(){var b=this.config.context;if(typeof a.fn.magnificPopup!=="undefined"&&typeof themifyScript.lightbox.lightboxOn!=="undefined"){a(b).on("click",ThemifyGallery.config.lightbox,function(d){d.preventDefault();var o=a(this),e,l=(o.find("> a").length>0)?o.find("> a").attr("href"):o.attr("href"),k=ThemifyGallery.getFileType(l),f=ThemifyGallery.isVideo(l),i=k=="inline"||k=="iframe"?[]:(o.data("rel")?a('a[data-rel="'+o.data("rel")+'"]'):o.closest(".themify_builder_row, .loops-wrapper").find(".themify_lightbox > img").parent()),j=i.length>1?i.index(this):0,n=(typeof a(this).children("img").attr("alt")!=="undefined")?a(this).children("img").attr("alt"):a(this).attr("title"),g=f?"100%":(ThemifyGallery.getParam("width",l))?ThemifyGallery.getParam("width",l):"94%",c=f?"100%":(ThemifyGallery.getParam("height",l))?ThemifyGallery.getParam("height",l):"100%";if(g.indexOf("%")==-1){g+="px"}if(c.indexOf("%")==-1){c+="px"}if(f){if(ThemifyGallery.isYoutube(l)){l=ThemifyGallery.getYoutubePath(l)}else{if(ThemifyGallery.isVimeo(l)){l=l.split("?")[0]}}}if(i.length>1&&j!==-1){e=[];i.each(function(q,r){e.push({src:a(r).attr("href"),title:(typeof a(r).find("img").attr("alt")!=="undefined")?a(r).find("img").attr("alt"):"",type:ThemifyGallery.getFileType(a(r).attr("href"))})})}else{j=0;e={src:l,title:n}}var m=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,p=m?'scrolling="no" ':"";var h={items:e,type:k,iframe:{markup:'<div class="mfp-iframe-scaler" style="max-width: '+g+" !important; height: "+c+';"><div class="mfp-close"></div><div class="mfp-iframe-wrapper"><iframe class="mfp-iframe" '+p+'noresize="noresize" frameborder="0" allowfullscreen></iframe></div></div>'},callbacks:{open:function(){var r=o.data("zoom-config"),q={};if(!r){return}r=r.split("|");if(typeof r[0]!=="undefined"){q.width=r[0]}if(typeof r[1]!=="undefined"){q.height=r[1]}a(this.content).parent().css(q)}}};if(i.length>1){a.extend(h,{gallery:{enabled:true}})}if(o.find("img").length>0){a.extend(h,{mainClass:"mfp-with-zoom",zoom:{enabled:!ThemifyGallery.config.is_touch,duration:300,easing:"ease-in-out",opener:function(){return o.find("img")}}})}if(f){h.mainClass+=" video-frame"}else{h.mainClass+=" standard-frame"}if(ThemifyGallery.isInIframe()){window.parent.jQuery.magnificPopup.open(h)}else{a.magnificPopup.open(h,j)}});a(themifyScript.lightbox.contentImagesAreas,b).each(function(){var c=[],d=[];if(themifyScript.lightbox.lightboxContentImages&&themifyScript.lightbox.lightboxGalleryOn){a(ThemifyGallery.config.lightboxContentImages,a(this)).filter(function(){if(!a(this).parent().hasClass("gallery-icon")&&!a(this).hasClass("themify_lightbox")){d.push(a(this));var e=a(this).attr("title");if(a(this).next(".wp-caption-text").length>0){e=a(this).next(".wp-caption-text").html()}else{e=a(this).children("img").attr("alt")}c.push({src:a(this).attr("href"),title:e,type:"image"});return a(this)}}).each(function(e){if(d.length>0){a(this).on("click",function(f){f.preventDefault();var g=a(this);var h={items:{src:c[e].src,title:c[e].title},type:"image"};if(g.find("img").length>0){a.extend(h,{mainClass:"mfp-with-zoom",zoom:{enabled:!ThemifyGallery.config.is_touch,duration:300,easing:"ease-in-out",opener:function(){return g.find("img")}}})}if(ThemifyGallery.isInIframe()){window.parent.jQuery.magnificPopup.open(h)}else{a.magnificPopup.open(h)}})}})}});if(themifyScript.lightbox.lightboxGalleryOn){a(b).on("click",ThemifyGallery.config.lightboxGallery,function(e){e.preventDefault();var d=a(ThemifyGallery.config.lightboxGallery,a(this).parent().parent().parent()),c=[];d.each(function(){var g=a(this).attr("title");if(a(this).parent().next(".gallery-caption").length>0){g=a(this).parent().next(".wp-caption-text").html()}else{if(a(this).children("img").length>0){g=a(this).children("img").attr("alt")}else{if(a(this).find(".gallery-caption").find(".entry-content").length>0){g=a(this).find(".gallery-caption").find(".entry-content").text()}}}c.push({src:a(this).attr("href"),title:g,type:"image"})});var f={gallery:{enabled:true},items:c,mainClass:"mfp-with-zoom",zoom:{enabled:!ThemifyGallery.config.is_touch,duration:300,easing:"ease-in-out",opener:function(g){var h=a(d[g.index]);return h.is("img")?h:h.find("img")}}};if(ThemifyGallery.isInIframe()){window.parent.jQuery.magnificPopup.open(f,d.index(this))}else{a.magnificPopup.open(f,d.index(this))}})}}},countItems:function(c){var b=this.config.context;if("lightbox"==c){return a(this.config.lightbox,b).length+a(this.config.lightboxGallery,b).length+a(ThemifyGallery.config.lightboxContentImages,b).length}else{return a(this.config.fullscreen,b).length+a(ThemifyGallery.config.lightboxContentImages,b).length}},isInIframe:function(){if(typeof ThemifyGallery.config.extraLightboxArgs!=="undefined"){return typeof ThemifyGallery.config.extraLightboxArgs.displayIframeContentsInParent!=="undefined"&&true==ThemifyGallery.config.extraLightboxArgs.displayIframeContentsInParent}else{return false}},getFileType:function(b){if(b.match(/\.(gif|jpg|jpeg|tiff|png)$/i)){return"image"}else{if(b.match(/\bajax=true\b/i)){return"ajax"}else{if(b.substr(0,1)=="#"){return"inline"}else{return"iframe"}}}},isVideo:function(b){return ThemifyGallery.isYoutube(b)||ThemifyGallery.isVimeo(b)||b.match(/\b.mov\b/i)||b.match(/\b.swf\b/i)},isYoutube:function(b){return b.match(/youtube\.com\/watch/i)||b.match(/youtu\.be/i)},isVimeo:function(b){return b.match(/vimeo\.com/i)},getYoutubePath:function(b){if(b.match(/youtu\.be/i)){return"//youtube.com/watch?v="+b.match(/youtu\.be\/([^\?]*)/i)[1]}else{return"//youtube.com/watch?v="+ThemifyGallery.getParam("v",b)}},getParam:function(d,c){d=d.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+d+"=([^&#]*)";var f=new RegExp(b);var e=f.exec(c);return(e==null)?"":e[1]}}}(jQuery));