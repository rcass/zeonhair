(function(e,c,a,g){var d="themifyParallaxit",f={selectors:"div",duration:"0.2"};function b(i,h){this.element=i;this.settings=e.extend({},f,h);this._defaults=f;this._name=d;this.fps=60;this.now=0;this.then=Date.now();this.interval=1000/this.fps;this.delta=0;this.requestId=g;this.parallaxElemns=[];this.init()}e.extend(b.prototype,{lastScrollTop:0,init:function(){this.parallaxElemns=Array.prototype.slice.call(a.querySelectorAll(this.settings.selectors));for(var h=0;h<this.parallaxElemns.length;h++){this.reset(h)}this.start()},scrollHandler:function(){this.requestId=requestAnimationFrame(this.scrollHandler.bind(this));this.now=Date.now();this.delta=this.now-this.then;if(this.delta>this.interval){this.then=this.now-(this.delta%this.interval);this.parallaxit()}},add:function(j){if(!j.data("current-delta")){this.parallaxElemns.push(j[0]);var h=this.parallaxElemns.length-1;this.reset(h)}},reset:function(h){this.parallaxElemns[h].settings=Object.create(null);this.parallaxElemns[h].settings.speed=this.parallaxElemns[h].getAttribute("data-parallax-element-speed")?(this.parallaxElemns[h].getAttribute("data-parallax-element-speed")/10):this.settings.duration;this.parallaxElemns[h].settings.reverse=this.parallaxElemns[h].getAttribute("data-parallax-element-reverse")?this.parallaxElemns[h].getAttribute("data-parallax-element-reverse"):false;this.parallaxElemns[h].settings.firstTop=e(this.parallaxElemns[h]).offset().top;this.parallaxElemns[h].setAttribute("data-current-delta",0)},stop:function(){if(this.requestId){c.cancelAnimationFrame(this.requestId);this.requestId=g}},start:function(){if(!this.requestId){this.requestId=requestAnimationFrame(this.scrollHandler.bind(this))}},parallaxit:function(){var j=c.pageYOffset,h=e(c);for(var n=0;n<this.parallaxElemns.length;n++){if(this.parallaxElemns[n].settings.reverse){var p=((this.parallaxElemns[n].settings.firstTop+e(this.parallaxElemns[n]).outerHeight())-j)-h.height()}else{var p=(j+h.height())-(this.parallaxElemns[n].settings.firstTop+e(this.parallaxElemns[n]).outerHeight())}var q=this.parallaxElemns[n].getAttribute("data-current-delta"),k=(0-(p*this.parallaxElemns[n].settings.speed)),l=(q-((q-k)*0.08));if(this.parallaxElemns[n].settings.reverse){l=Math.max(l,-(h.height()-e(this.parallaxElemns[n]).outerHeight()));l=Math.min(l,(h.height()/4))}this.parallaxElemns[n].style.top=l+"px";this.parallaxElemns[n].setAttribute("data-current-delta",l);if(e(this.parallaxElemns[n]).data("prallax-fade")){var o=this.parallaxElemns[n].getBoundingClientRect(),m;if((o.bottom-c.innerHeight*0.15)<=this.parallaxElemns[n].offsetHeight&&o.bottom>=0){m=(o.bottom-c.innerHeight*0.15)/this.parallaxElemns[n].offsetHeight;this.parallaxElemns[n].style.opacity=m}else{if(o.top>0){this.parallaxElemns[n].style.opacity=1}}}}},isElementInViewport:function(h){var i=h.getBoundingClientRect();return(i.top>=0&&i.left>=0&&i.bottom<=(c.innerHeight||a.documentElement.clientHeight)&&i.right<=(c.innerWidth||a.documentElement.clientWidth))}});e.fn[d]=function(h){return this.each(function(){if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new b(this,h))}})}})(jQuery,window,document);