var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,f,h){b instanceof String&&(b=String(b));for(var k=b.length,a=0;a<k;a++){var c=b[a];if(f.call(h,c,a,b))return{i:a,v:c}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,f,h){b!=Array.prototype&&b!=Object.prototype&&(b[f]=h.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,f,h,k){if(f){h=$jscomp.global;b=b.split(".");for(k=0;k<b.length-1;k++){var a=b[k];a in h||(h[a]={});h=h[a]}b=b[b.length-1];k=h[b];f=f(k);f!=k&&null!=f&&$jscomp.defineProperty(h,b,{configurable:!0,writable:!0,value:f})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,h){return $jscomp.findInternal(this,b,h).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var f=0;return $jscomp.iteratorPrototype(function(){return f<b.length?{done:!1,value:b[f++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.iteratorFromArray=function(b,f){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var h=0,k={next:function(){if(h<b.length){var a=h++;return{value:f(a,b[a]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6-impl","es3");var ThemifyBuilderCommon,themifyBuilder;
(function(b,f,h,k){ThemifyBuilderCommon={fonts:[],safe_fonts:{},google_fonts:{},uuid:0,storageAvailable:function(a){try{var b=f[a];b.setItem("__storage_test__","__storage_test__");b.removeItem("__storage_test__");return!0}catch(d){return!1}},isFrontend:function(){return"true"===themifyBuilder.isFrontend},setupLoader:function(){b("<div/>",{id:"themify_builder_alert","class":"themify-builder-alert"}).appendTo("body").hide()},showLoader:function(a){var c=b(".builder_preview_lightbox"),d=b(".builder_preview_loader_image");
"show"===a?b("#themify_builder_alert").addClass("busy").show():"spinhide"===a?b("#themify_builder_alert").delay(800).fadeOut(800,function(){b(this).removeClass("busy")}):"lightbox-preview"===a?(c.hide(),d.length?d.show():b("<div>",{"class":"builder_preview_loader_image"}).insertBefore(c)):"lightbox-preview-hide"===a?(c.show(),d.hide()):"error"===a?b("#themify_builder_alert").removeClass("busy").addClass("error").delay(800).fadeOut(800,function(){b(this).removeClass("error")}):b("#themify_builder_alert").removeClass("busy").addClass("done").delay(800).fadeOut(800,
function(){b(this).removeClass("done")})},getDocHeight:function(){return Math.max(Math.max(h.body.scrollHeight,h.documentElement.scrollHeight),Math.max(h.body.offsetHeight,h.documentElement.offsetHeight),Math.max(h.body.clientHeight,h.documentElement.clientHeight))},highlightColumn:function(a){b(".themify_builder_col").removeClass("current_selected_column");a.addClass("current_selected_column")},highlightRow:function(a){b(".themify_builder_row").removeClass("current_selected_row");a.addClass("current_selected_row")},
highlightSubRow:function(a){b(".themify_builder_sub_row").removeClass("current_selected_sub_row");a.addClass("current_selected_sub_row")},setUpTooltip:function(){if(0<b(".themify_is_premium_module").length||0<b(".themify_builder_lite").length){0===b(".themify_tooltip").length&&b('<div class="themify_tooltip">Upgrade to premium version to get this feature<div class="themify_tooltip_arrow"><div class="themify_tooltip_arrow_border"></div><div class="themify_tooltip_arrow_background"></div></div></div>').appendTo("body");
var a=b(".themify_tooltip").outerWidth(!0)/2+10,c=b(".themify_tooltip").outerHeight(!0)+10;b(".themify_builder_lite,.themify_is_premium_module").each(function(){if(0===b(this).children(".themify_builder_lite_modal").length){var d=b(this);b('<div class="themify_builder_lite_modal"></div>').appendTo(b(this)).mouseenter(function(e){var g=0<d.children(".themify_builder_input").length,l=b(".themify_tooltip");e=b(this).offset();g=g?50:b(this).width()/2-a;b(".themify_builder_lite_active").removeClass("themify_builder_lite_active");
b(this).addClass("themify_builder_lite_active");l.css({top:e.top-c,left:e.left+g}).delay(500).queue(function(a){var c=b(this);0<b(".themify_builder_lite_active").length?c.stop().fadeIn("fast"):c.hide();a()});setTimeout(function(){if(0===b(".themify_builder_lite_active").length)l.hide();else{var a=!1;b(".themify_builder_lite_modal").each(function(){if(b(this).is(":hover"))return a=!0,!1});a||(b(".themify_builder_lite_active").removeClass("themify_builder_lite_active"),l.hide())}},1E3)}).mouseleave(function(){b(".themify_builder_lite_active").removeClass("themify_builder_lite_active");
b(".themify_tooltip").hide()})}});b(f).scroll(function(){b(".themify_builder_lite_active").trigger("mouseenter")})}},_saveRevision:function(a){var c=ThemifyBuilderCommon;c.LiteLightbox.prompt(themifyBuilder.i18n.enterRevComment,function(d){null!==d&&b.ajax({type:"POST",url:themifyBuilder.ajaxurl,data:{action:"tfb_save_revision",tfb_load_nonce:themifyBuilder.tfb_load_nonce,postid:themifyBuilder.post_ID,rev_comment:d},beforeSend:function(a){c.showLoader("show")},success:function(d){d.success?b.isFunction(a)&&
a.call(this,d):alert(d.data);c.showLoader("hide")}})})},restoreRevision:function(a){a.preventDefault();var c=b(this).data("rev-id"),d=ThemifyBuilderCommon,e=function(){b.ajax({type:"POST",url:themifyBuilder.ajaxurl,data:{action:"tfb_restore_revision_page",tfb_load_nonce:themifyBuilder.tfb_load_nonce,revid:c},beforeSend:function(a){d.showLoader("show")},success:function(a){a.success?(d.showLoader("hide"),d.Lightbox.close(),f.location.reload()):(d.showLoader("error"),alert(a.data))}})};d.LiteLightbox.confirm(themifyBuilder.i18n.confirmRestoreRev,
function(a){"yes"===a?d._saveRevision(e):e()},{buttons:{no:{label:"Don't Save"},yes:{label:"Save"}}})},deleteRevision:function(a){a.preventDefault();var c=b(this),d=ThemifyBuilderCommon;a=b(this).data("rev-id");confirm(themifyBuilder.i18n.confirmDeleteRev)&&b.ajax({type:"POST",url:themifyBuilder.ajaxurl,data:{action:"tfb_delete_revision",tfb_load_nonce:themifyBuilder.tfb_load_nonce,revid:a},beforeSend:function(a){d.showLoader("show");c.parent().hide()},success:function(a){a.success?d.showLoader("hide"):
(d.showLoader("error"),c.parent().show(),alert(a.data))}})},getClosestRow:function(a){return a.parent().closest(".themify_builder_row")},getClosestCol:function(a){return a.parent().closest(".themify_builder_col")},getClosestSubRow:function(a){return a.parent().closest(".themify_builder_sub_row")},getComponentOrder:function(a){var b=ThemifyBuilderCommon;var d=b.getComponentType(a);if("sub-col"===d){d=a.index();var e=b.getClosestSubRow(a).index();var g=b.getClosestCol(a).index();a=b.getClosestRow(a).index();
return a+"-"+g+"-"+e+"-"+d}if("col"===d)return g=a.index(),a=b.getClosestRow(a).index(),a+"-"+g;if("row"===d)return a=a.index()},getComponentType:function(a){var b="";a.hasClass("themify_builder_col")?b=0<a.closest(".themify_builder_sub_row_content").length?"sub-col":"col":a.hasClass("themify_builder_row")?b="row":a.hasClass("themify_builder_sub_row")?b="subrow":a.hasClass("themify_builder_module_front")||a.hasClass("themify_builder_module")?b="module":a.hasClass("themify_module_holder")?b="module-holder":
a.hasClass("module")&&(b="module-inner");return b},getComponentBuilderId:function(a){a=a.closest(".themify_builder_content").data("postid");return"undefined"===typeof a||isNaN(a)?-1:a},Clipboard:{key:"themify_builder_clipboard_",set:function(a,b){ThemifyBuilderCommon.storageAvailable("localStorage")?(localStorage.setItem(this.key+"type",a),localStorage.setItem(this.key+"content",b)):alert(themifyBuilderCommon.text_no_localStorage)},get:function(a){if(ThemifyBuilderCommon.storageAvailable("localStorage")){var b=
localStorage.getItem(this.key+"type"),d=localStorage.getItem(this.key+"content");return"undefined"===typeof a||a===b?d:!1}alert(themifyBuilderCommon.text_no_localStorage)}},confirmDataPaste:function(){return confirm(themifyBuilderCommon.text_confirm_data_paste)},alertWrongPaste:function(){alert(themifyBuilderCommon.text_alert_wrong_paste)},detectBuilderComponent:function(a){return a.attr("data-component")||a.data("component")||!1},getModuleSettings:function(a){a=a.find(".front_mod_settings").children('script[type="text/json"]').text().trim();
return 2<a.length&&"null"!=a?JSON.parse(a):""},getRowStylingSettings:function(a){a=a.find(".row_inner").children(".row-data-styling").data("styling");return"object"===typeof a?a:!1},getSubRowStylingSettings:function(a){a=a.children(".subrow-data-styling").data("styling");return"object"===typeof a?a:!1},getColumnStylingSettings:function(a){a=a.children(".column-data-styling").data("styling");return"object"===typeof a?a:!1},findColumnInNewRow:function(a,b){var c=null;if(b.hasOwnProperty("sub-col_index")){var e=
b["sub-col_index"];c=b.col_index;c=a.find(".themify_builder_row_content > .themify_builder_col:nth-child("+(c+1)+")").find(".themify_builder_sub_row_content > .themify_builder_col:nth-child("+(e+1)+")")}else b.hasOwnProperty("col_index")&&(c=b.col_index,c=a.find(".themify_builder_row_content > .themify_builder_col:nth-child("+(c+1)+")"));return c},getCheckedRadioInGroup:function(a,c){"undefined"===typeof c&&(c=null);var d=a.attr("name");return b('input:radio[name="'+d+'"]:checked',c)},loadGoogleFonts:function(a,
b){b=b||!1;var c={google:{families:a}};WebFont.load(c);b&&(c.context=b,WebFont.load(c))},autoComplete:function(){if(0<b(".themify_tax_autocomplete").length){var a=[];b(".themify_tax_autocomplete").each(function(){var c=b(this),d=c.closest(".themify_builder_input").find("input.query_category_multiple"),e=d.val();b(this).autocomplete({minLength:2,source:function(a,d){var e=b.trim(a.term);b.getJSON(themifyBuilder.ajaxurl,{term:b.trim(e),tax:c.data("tax"),action:c.data("action")},function(a,b,c){d(a)})},
select:function(a,b){d.val(b.item.value);this.value=b.item.label;return!1}}).focus(function(){b(this).autocomplete("search");return!1});if(e&&"undefined"!==e){var g={};g[c.data("tax")]=e;a.push(g)}else d.val("")});a&&b.ajax({url:themifyBuilder.ajaxurl,type:"POST",dataType:"json",data:{data:a,action:"themify_builder_get_tax_data"},success:function(a){if(a)for(var c in a)b("#themify_search_cat_"+a[c].tax).val(a[c].val)}})}},hideShowBackgroundZoom:function(a){function c(c){var d=b("#background_zoom",
a).closest(".themify_builder_field");"repeat-none"===c?d.fadeIn():d.fadeOut()}b("#background_repeat",a).change(function(){c(b(this).val())});c(b("#background_repeat",a).val())},hideShowSliderArrow:function(a){0<b("#show_arrow_slider",a).length&&b("#show_arrow_slider",a).change(function(){var c=b("#show_arrow_buttons_vertical",a).closest(".themify_builder_field");"yes"===b(this).val()?c.slideDown():c.slideUp()}).trigger("change")},hideShowBorder:function(a){b('.style_apply_all[value="border"]',a).each(function(){var a=
b(this).closest(".themify_builder_field").prevUntil("h4").find("select.tfb_lb_option"),d=function(){var a=b(this).closest(".themify_builder_input").children().not(".selectwrapper");b(this).val()&&"none"!==b(this).val()?a.fadeIn():a.fadeOut()};d.apply(a);a.change(d)})},fontPreview:function(a,c){function d(a){a.unwrap();var c=a.comboSelect({comboClass:"themify-combo-select",comboArrowClass:"themify-combo-arrow",comboDropDownClass:"themify-combo-dropdown",inputClass:"themify-combo-input",disabledClass:"themify-combo-disabled",
hoverClass:"themify-combo-hover",selectedClass:"themify-combo-selected",markerClass:"themify-combo-marker"}).parent("div");c.on("comboselect:close",function(){b(".themify_builder_font_preview").hide()});c.trigger("focusin");b(".themify-combo-item",c).unbind("hover").hover(function(){var d=b(this).data("value");if(d&&b(this).is(":visible")){var f=c.next(".themify_builder_font_preview");"default"===d&&(d="inherit");f.css({top:b(this).position().top+30,"font-family":d,display:"block"});if("inherit"!==
d&&!b(this).hasClass("themify_builder_font_loaded")){var h=b(this),l=h.index();h.addClass("themify_builder_font_loaded");f=f.children("span");-1===b.inArray(d,g.fonts)&&(f.addClass("themify_show_wait"),"webfont"!==a.find('option[value="'+d+'"]').data("type")?WebFont.load({google:{families:[d]},fontloading:function(a,b){g.fonts.push(d);f.removeClass("themify_show_wait")},fontinactive:function(a,b){g.fonts.push(d);f.removeClass("themify_show_wait")}}):(g.fonts.push(d),f.removeClass("themify_show_wait")));
e(l,d,f)}}})}function e(a,c){b(".themify-combo-dropdown").find("li:eq("+a+")").addClass("themify_builder_font_loaded").css("font-family",c)}this.autoComplete();this.hideShowBorder(a);this.hideShowSliderArrow(a);this.hideShowBackgroundZoom(a);var g=ThemifyBuilderCommon,l="",h="";if(0===Object.keys(g.safe_fonts).length){for(var f in themify_builder_plupload_init.fonts.safe)""!==themify_builder_plupload_init.fonts.safe[f].value&&"default"!==themify_builder_plupload_init.fonts.safe[f].value&&(g.safe_fonts[themify_builder_plupload_init.fonts.safe[f].value]=
themify_builder_plupload_init.fonts.safe[f].name);for(f in themify_builder_plupload_init.fonts.google)""!==themify_builder_plupload_init.fonts.google[f].value&&"default"!==themify_builder_plupload_init.fonts.google[f].value&&(g.google_fonts[themify_builder_plupload_init.fonts.google[f].value]=themify_builder_plupload_init.fonts.google[f].name)}b(".font-family-select",a).each(function(){var a=b(this).prop("name"),e=c&&c[a]?c[a]:!1,f=b(this).find("optgroup");b(this).parent(".themify_builder_font_preview_wrapper").focusin(function(){b(this).unbind("focusin");
if(!l){for(var a in g.safe_fonts){var c=e===a?'selected="selected"':"";l+="<option "+c+' data-type="webfont" value="'+a+'">'+g.safe_fonts[a]+"</option>"}for(a in g.google_fonts)c=e===a?'selected="selected"':"",h+="<option "+c+' value="'+a+'">'+g.google_fonts[a]+"</option>"}f.first().html(l);f.last().html(h);d(b(this).children("select"))});e&&(g.safe_fonts[e]?f.first().html('<option selected="selected" data-type="webfont" value="'+e+'">'+g.safe_fonts[e]+"</option>"):g.google_fonts[e]&&f.last().html('<option selected="selected"  value="'+
e+'">'+g.google_fonts[e]+"</option>"))});if(0<g.fonts.length){var k=b(".themify-combo-dropdown").first();for(f in g.fonts){var m=k.find('[data-value="'+g.fonts[f]+'"]').index();e(m,g.fonts[f])}}b(".themify-combo-arrow").unbind("click").click(function(){b(".themify_builder_font_preview").hide()})},Lightbox:{$lightbox:null,setup:function(){function a(){750<parseInt(c.$lightbox.width())?c.$lightbox.addClass("larger-lightbox"):c.$lightbox.removeClass("larger-lightbox")}var c=ThemifyBuilderCommon.Lightbox,
d="true"==themifyBuilder.isThemifyTheme?"is-themify-theme":"is-not-themify-theme",d=wp.template("builder_lightbox")({is_themify_theme:d});c.bindEvents();b(d).hide().find("#themify_builder_lightbox_parent").hide().end().appendTo("body");c.$lightbox=b("#themify_builder_lightbox_parent");(function(){c.$lightbox.resizable({minWidth:500,maxWidth:880,minHeight:320,maxHeight:800,create:function(a,b){c.$lightbox.find(".ui-resizable-handle.ui-icon-gripsmall-diagonal-se").removeClass("ui-icon-gripsmall-diagonal-se").addClass("ui-icon-arrow-1-se")},
resize:function(b,d){c.adjustHeight(d.size.height);a()},stop:function(){c.fixContainment();b("body").trigger("themify_builder_lightbox_resize")}});b("body").on("editing_module_option",a)})();(function(){var a=h.querySelector("#themify_builder_lightbox_parent .themify_builder_lightbox_top_bar");b("body").mouseleave(function(){c.$lightbox.trigger("mouseup")});c.$lightbox.draggable({handle:a,scroll:!1,start:ThemifyBuilderCommon.Lightbox.fixContainment,stop:ThemifyBuilderCommon.Lightbox.fixContainment})})();
(function(){c.$lightbox.on("dragstop resizestop",function(a,b){var d={top:b.position.top,left:b.position.left,width:c.$lightbox.outerWidth(),height:c.$lightbox.outerHeight()},e="themify_builder_lightbox_frontend_pos_size";ThemifyBuilderCommon.isFrontend()||(e="themify_builder_lightbox_backend_pos_size");localStorage.setItem(e,JSON.stringify(d))})})()},bindEvents:function(){var a=ThemifyBuilderCommon.Lightbox,c=b("body"),d="true"==themifyBuilder.isTouch?"touchend":"click";c.on("editing_row_option editing_column_option editing_module_option editing_subrow_option",
a.selectDefaultTab).on(d,".themify_builder_options_tab li",a.switchTabs).on(d,".builder_cancel_lightbox",a.cancel).on(d,"#builder_submit_row_settings",themifybuilderapp.Forms.rowSaving).on(d,"#builder_submit_subrow_settings",themifybuilderapp.Forms.subRowSaving).on(d,"#builder_submit_column_settings",themifybuilderapp.Forms.columnSaving).on(d,"#builder_submit_module_settings",themifybuilderapp.Forms.moduleSave).on("change click",".tf-option-checkbox-js",a.clickRadioOption).on("change",'.tf-option-checkbox-enable input[type="checkbox"]',
a.clickCheckboxOption).on(d,'#tfb_module_settings input[type="text"], #tfb_module_settings textarea',a.focusInput).on("change","#tfb_module_settings .query_category_single",function(){b(this).closest(".themify_builder_input").find(".query_category_multiple").val(b(this).val())}).on(d,".reset-styling",a.resetStyling);b(f).on("scroll",ThemifyBuilderCommon.tinyMCEMenuFix);themifyBuilder.disableShortcuts||a.controlByKeyInput()},adjustHeight:function(a){ThemifyBuilderCommon.Lightbox.$lightbox.find(".themify_builder_options_tab_wrapper").css("height",
a-55)},fixContainment:function(){var a=ThemifyBuilderCommon.Lightbox,c=a.$lightbox.outerWidth(),d=b(f).width(),e=b(f).height(),c=[-c+20,0,d-20,e-30],d=a.$lightbox.position(),e={};d.left<c[0]&&(e.left=c[0]);0>d.top&&(e.top=0);d.left>c[2]&&(e.left=c[2]);d.top>c[3]&&(e.top=c[3]);a.$lightbox.css(e);ThemifyBuilderCommon.tinyMCEMenuFix()},open:function(a,c){var d=ThemifyBuilderCommon.Lightbox,e=b("#themify_builder_lightbox_container");ThemifyBuilderCommon.isFrontend()&&themifybuilderapp.Frontend.hideModulesControl();
themifybuilderapp.toolbar.trigger("hide-distraction-panel");this._cleanLightBoxContent();d.$lightbox.addClass("tfb-lightbox-open");b("#themify_builder_overlay").show();ThemifyBuilderCommon.showLoader("show");if(a.loadMethod&&"inline"===a.loadMethod){var g=ThemifyBuilderCommon.templateCache.get("tmpl-"+a.templateID);d.openCallback(g,e,c)}else a.data=_.extend(a.data||{},{nonce:themifyBuilder.tfb_load_nonce}),a=_.defaults(a||{},{type:"POST",url:themifyBuilder.ajaxurl}),b.ajax(a).done(function(a){d.openCallback(a,
e,c)})},openCallback:function(a,c,d){var e=ThemifyBuilderCommon.Lightbox,g="themify_builder_lightbox_frontend_pos_size";ThemifyBuilderCommon.isFrontend()||(g="themify_builder_lightbox_backend_pos_size");var l=localStorage.getItem(g),g={top:100,left:Math.max(0,b(f).width()/2-300),width:600,height:500};null!==l&&(g=JSON.parse(l));e.$lightbox.show().css({top:g.top,left:g.left,width:g.width,height:g.height}).addClass("animated fadeIn").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",
function(a){e.fixContainment();b(this).removeClass("animated fadeIn")});b(h).on("keyup",e.cancelKeyListener);ThemifyBuilderCommon.showLoader("spinhide");a=b(a);l=a.find("#themify_builder_lightbox_options_tab_items");0<l.length&&(b(".themify_builder_options_tab").append(l.children()),l.remove());l=a.find("#themify_builder_lightbox_actions_items");0<l.length&&(b(".themify_builder_lightbox_actions").append(l.children()),l.remove());c.append(a);e.$lightbox.find(".themify_builder_options_tab_wrapper").each(function(){var a=
new SimpleBar(this);b(a.getScrollElement()).on("scroll",ThemifyBuilderCommon.tinyMCEMenuFix)});e.adjustHeight(g.height);e.$lightbox.show();b("#themify_builder_lightbox_container").find("select").not(".font-family-select").wrap('<div class="selectwrapper"></div>');b(".selectwrapper").click(function(){b(this).toggleClass("clicked")});b.isFunction(d)&&d.call(this,a[0]);ThemifyBuilderCommon.setUpTooltip();var k=b(e.$lightbox).find('input[name="visibility_all"]');setTimeout(function(){k.trigger("change")},
1E3)},close:function(){var a=ThemifyBuilderCommon.Lightbox,c=b("form#tfb_module_settings");b(h).off("keyup",a.cancelKeyListener);"undefined"!==typeof tinyMCE&&c.find(".tfb_lb_wp_editor").each(function(){var a=b(this).prop("id");switchEditors.go(a,"tmce");themifybuilderapp.Views.ControlRegistry.lookup(a).resetEditor()});ThemifyBuilderCommon.isFrontend()&&(a.forgetRow(),null!==themifybuilderapp.liveStylingInstance&&themifybuilderapp.liveStylingInstance.remove(),themifybuilderapp.Frontend.showColumnsBorder());
themifybuilderapp.toolbar.trigger("show-distraction-panel");a.$lightbox.fadeOut(function(c){b(this).removeClass("animated fadeOut");a._cleanLightBoxContent();b("#themify_builder_overlay, #themify_builder_lightbox_parent").hide();a.$lightbox.removeClass("tfb-lightbox-open");themifybuilderapp.vent.trigger("dom:builder:change")})},_cleanLightBoxContent:function(){b("#themify_builder_lightbox_container").children().remove().end().empty();this.$lightbox.find(".themify_builder_options_tab").empty();this.$lightbox.find(".themify_builder_lightbox_actions").children().not(".builder_cancel_lightbox").remove()},
controlByKeyInput:function(){b(h).on("keydown",function(a){if(83==a.which&&(1==a.ctrlKey||1==a.metaKey)){var c=h.activeElement.tagName.toLowerCase();if("input"!=c&&"textarea"!=c){a.preventDefault();c=b("#builder_submit_module_settings");var d=b("#builder_submit_row_settings"),e=b("#builder_submit_subrow_settings"),g=b("#builder_submit_column_settings"),f=b("#tb_toolbar").find(".tb_toolbar_save");0<c.length?c.trigger("click"):0<d.length?d.trigger("click"):0<e.length?e.trigger("click"):0<g.length?g.trigger("click"):
0<f.length&&f.is(":visible")&&f.trigger("click")}}90==a.which&&(1==a.ctrlKey&&1==a.shiftKey||1==a.metaKey&&1==a.shiftKey)?(c=h.activeElement.tagName.toLowerCase(),"input"!=c&&"textarea"!=c&&(a.preventDefault(),b(".js-themify-builder-redo-btn").length&&b(".js-themify-builder-redo-btn").trigger("click"))):90!=a.which||1!=a.ctrlKey&&1!=a.metaKey||(c=h.activeElement.tagName.toLowerCase(),"input"!=c&&"textarea"!=c&&(a.preventDefault(),b(".js-themify-builder-undo-btn").length&&b(".js-themify-builder-undo-btn").trigger("click")))})},
rememberedRow:null,rememberedCid:null,rememberRow:function(a){var b=ThemifyBuilderCommon.Lightbox;b.rememberedRow=a.$el[0].outerHTML;b.rememberedCid=a.model.cid;"module"===a.model.get("elType")&&a.model.trigger("custom:restoredata")},revertToRememberedRow:function(){var a=ThemifyBuilderCommon.Lightbox,b=themifybuilderapp.Models.Registry.lookup(a.rememberedCid);b&&b.trigger("custom:restorehtml",a.rememberedRow);a.rememberedRow=null;a.rememberedCid=null},forgetRow:function(){var a=ThemifyBuilderCommon.Lightbox;
a.rememberedRow=null;a.rememberedCid=null},previewButtonClicked:function(a){return a.hasClass("builder_preview_lightbox")},showPreviewBtn:function(){b(".builder_button.builder_preview_lightbox").show()},hidePreviewBtn:function(){b(".builder_button.builder_preview_lightbox").hide()},clickRadioOption:function(a){a=ThemifyBuilderCommon.getCheckedRadioInGroup(b(this),ThemifyBuilderCommon.Lightbox.$lightbox);var c=b('input[name="'+a.prop("name")+'"]',ThemifyBuilderCommon.Lightbox.$lightbox);a=a.data("selected");
c.each(function(){b(this).closest(".themify_builder_row_content").length?b(this).closest(".themify_builder_row_content").find(".tf-group-element-"+b(this).val()).hide():b(".tf-group-element-"+b(this).val()).hide()});b(this).closest(".themify_builder_row_content").length?b(this).closest(".themify_builder_row_content").find("."+a).show():b("."+a).show();b(".thumb_preview").each(function(){0===b(this).find("img").length&&b(this).hide()})},clickCheckboxOption:function(a){b(".tf-checkbox-element").hide();
b(this).parent(".themify-checkbox").find("input:checked").each(function(){b(".tf-checkbox-element."+b(this).data("selected")).show()})},cancelKeyListener:function(a){var b=ThemifyBuilderCommon.Lightbox;27==a.keyCode&&(a.preventDefault(),b.cancel(a))},cancel:function(a){a.preventDefault();a=ThemifyBuilderCommon.Lightbox;null!==a.rememberedRow&&a.revertToRememberedRow();ThemifyBuilderCommon.isFrontend()&&themifybuilderapp.styleSheet.revertRules();ThemifyBuilderCommon.undoManager.startValue=null;ThemifyBuilderCommon.undoManager.startData=
{};a.close()},focusInput:function(a){b(this).focus()},resetStyling:function(a){a.preventDefault();a=b(this).data("reset");var c=null;"module"===a?c=b("#themify_builder_options_styling"):"row"===a?c=b("#tfb_row_settings"):"subrow"===a?c=b("#tfb_subrow_settings"):"column"===a&&(c=b("#tfb_column_settings"));var d=[];c.find(".tfb_lb_option:not(.exclude-from-reset-field)").each(function(){var a=b(this);if("radio"===a.attr("type")){var c=a.attr("name");-1===d.indexOf(c)&&d.push(c)}else a.val("").prop("selected",
!1).trigger("change");a.hasClass("themify-builder-uploader-input")?a.parent().find(".img-placeholder").html("").parent().hide():a.hasClass("font-family-select")?a.val("default").trigger("change"):a.hasClass("builderColorSelectInput")&&(a.parent().find(".colordisplay").val("").trigger("blur").trigger("change"),a.parent().find(".opacity-input").val(""))});d.forEach(function(a){b('input:radio[name="'+a+'"]:first',c).attr("checked",!0).trigger("change")})},switchTabs:function(a){var c=ThemifyBuilderCommon.Lightbox,
d=b(this);a.preventDefault();b(this).addClass("current");setTimeout(function(){d.siblings().removeClass("current")},10);a=b(this).find("a").attr("href");b(a).show().siblings(".themify_builder_options_tab_wrapper").hide();ThemifyBuilderCommon.isFrontend()&&c.handleDisplayOfPreviewBtn(a)},selectDefaultTab:function(a){a=ThemifyBuilderCommon.Lightbox;b(".themify_builder_options_tab_wrapper").hide().first().show();var c=b("ul.themify_builder_options_tab li:first");c.addClass("current");ThemifyBuilderCommon.isFrontend()&&
(c=c.find("a").attr("href"),a.handleDisplayOfPreviewBtn(c))},handleDisplayOfPreviewBtn:function(a){var b=ThemifyBuilderCommon.Lightbox;"#themify_builder_options_setting"===a?b.showPreviewBtn():b.hidePreviewBtn()}},undoManager:{instance:new UndoManager,events:b({}),startValue:null,startData:{},startStyleValue:null,set:function(a,b,d,e,g,f){if(!_.isNull(f)&&_.isObject(f)){var c=f.startValue;var h=f.newValue}ThemifyBuilderCommon.undoManager.instance.add({undo:function(){a[0].innerHTML=b;themifybuilderapp.vent.trigger("dom:observer:update",
a);if(!_.isEmpty(e)){var d=themifybuilderapp.Models.Registry.lookup(e.cid);d&&(d.set(e.value,{silent:!0}),d.unset("temp_settings",{silent:!0}))}_.isUndefined(c)||themifybuilderapp.styleSheet.replaceCSSText(c)},redo:function(){a[0].innerHTML=d;themifybuilderapp.vent.trigger("dom:observer:update",a);if(!_.isEmpty(g)){var b=themifybuilderapp.Models.Registry.lookup(g.cid);b&&(b.set(g.value,{silent:!0}),b.unset("temp_settings",{silent:!0}))}_.isUndefined(h)||themifybuilderapp.styleSheet.replaceCSSText(h)}});
ThemifyBuilderCommon.undoManager.startValue=null;ThemifyBuilderCommon.undoManager.startData={};ThemifyBuilderCommon.undoManager.startStyleValue=null},setStartValue:function(a){ThemifyBuilderCommon.undoManager.startValue=a},getStartValue:function(){return ThemifyBuilderCommon.undoManager.startValue},setStartData:function(a){ThemifyBuilderCommon.undoManager.startData=a},getStartData:function(){return ThemifyBuilderCommon.undoManager.startData},setStartStyleValue:function(a){ThemifyBuilderCommon.undoManager.startStyleValue=
a},getStartStyleValue:function(){return ThemifyBuilderCommon.undoManager.startStyleValue}},LiteLightbox:{modal:new wp.media.view.Modal({controller:{trigger:function(){}}}),confirmView:wp.Backbone.View.extend({template:wp.template("builder_lite_lightbox_confirm"),className:"themify_builder_lite_lightbox_content",initialize:function(a){this.options=a||{}},render:function(){this.$el.html(this.template({message:this.options.message,buttons:this.options.buttons}))},events:{"click button":"buttonClick"},
buttonClick:function(a){a.preventDefault();a=b(a.currentTarget).data("type");this.trigger("litelightbox:confirm",a)}}),promptView:wp.Backbone.View.extend({template:wp.template("builder_lite_lightbox_prompt"),className:"themify_builder_lite_lightbox_content",initialize:function(a){this.options=a||{}},render:function(){this.$el.html(this.template(this.options))},events:{"click button":"buttonClick","keypress .themify_builder_litelightbox_prompt_input":"keyPress"},buttonClick:function(a){a.preventDefault();
a=b(a.currentTarget).data("type");var c=this.$el.find(".themify_builder_litelightbox_prompt_input").val();this.trigger("litelightbox:prompt",a,c)},keyPress:function(a){13===a.which&&(a=b(a.currentTarget).val(),this.trigger("litelightbox:prompt","ok",a))}}),confirm:function(a,c,d){d=_.defaults(d||{},{buttons:{no:{label:"No"},yes:{label:"Yes"}}});d.message=a;a=new ThemifyBuilderCommon.LiteLightbox.confirmView(d);ThemifyBuilderCommon.LiteLightbox.modal.content(a);ThemifyBuilderCommon.LiteLightbox.modal.open();
a.on("litelightbox:confirm",function(a){ThemifyBuilderCommon.LiteLightbox.modal.close();b.isFunction(c)&&c.call(this,a)})},prompt:function(a,c,d){d=_.defaults(d||{},{buttons:{cancel:{label:"Cancel"},ok:{label:"OK"}}});d.message=a;a=new ThemifyBuilderCommon.LiteLightbox.promptView(d);ThemifyBuilderCommon.LiteLightbox.modal.content(a);ThemifyBuilderCommon.LiteLightbox.modal.open();a.on("litelightbox:prompt",function(a,d){ThemifyBuilderCommon.LiteLightbox.modal.close();b.isFunction(c)&&c.call(this,"cancel"==
a?null:d)})},alert:function(a){ThemifyBuilderCommon.LiteLightbox.confirm(a,null,{buttons:{yes:{label:"OK"}}})}},getDomPath:function(a){for(var b=[];null!=a.parentNode;){for(var d=0,e=0,f=0;f<a.parentNode.childNodes.length;f++){var h=a.parentNode.childNodes[f];h.nodeName==a.nodeName&&(h===a&&(e=d),d++)}a.hasAttribute("id")&&""!=a.id?b.unshift(a.nodeName.toLowerCase()+"#"+a.id):1<d?b.unshift(a.nodeName.toLowerCase()+":eq("+e+")"):b.unshift(a.nodeName.toLowerCase());a=a.parentNode}return b.slice(1)},
getColClassName:function(a){a=a.prop("class").split(" ");for(var b="col-full",d=0;d<a.length;d++){var e=/^col([0-9]+)\-([0-9]+)/.exec(a[d]);null!=e&&(b=e[0])}return b},templateCache:{get:function(a){this.templates||(this.templates={});var b=this.templates[a];b||(b=h.getElementById(a).innerHTML,this.templates[a]=b);return b}},randNumber:function(){this.uuid++;return this.uuid+"-"+Math.random().toString(36).substr(2,7)},tinyMCEMenuFix:function(){b(".wp-editor-wrap .mce-active").length&&b(".wp-editor-wrap").trigger("click")}}})(jQuery,
window,document);
