var Themify_Icons={};(function(a){Themify_Icons={target:"",init:function(){var b=a("body");b.on("click",".themify_fa_toggle",function(c){c.preventDefault();var d=a(this);if(d.attr("data-target")){Themify_Icons.target=a(d.attr("data-target"))}else{Themify_Icons.target=d.prev()}Themify_Icons.showLightbox(Themify_Icons.target.val())});b.on("click","#themify_lightbox_fa .lightbox_container a",function(c){c.preventDefault();Themify_Icons.setIcon(a(this).data("icon"))});b.on("click","#themify_lightbox_overlay, #themify_lightbox_fa .close_lightbox",function(c){c.preventDefault();Themify_Icons.closeLightbox()});b.on("change",".tf-icon-group-select input",function(d){var c=a(this).val();a("#themify_lightbox_fa .tf-font-group").hide().filter('[data-group="'+c+'"]').show()});Themify_Icons.Category();Themify_Icons.Search()},getDocHeight:function(){var b=document;return Math.max(Math.max(b.body.scrollHeight,b.documentElement.scrollHeight),Math.max(b.body.offsetHeight,b.documentElement.offsetHeight),Math.max(b.body.clientHeight,b.documentElement.clientHeight))},showLightbox:function(b){Themify_Icons.loadIconsList(function(){var h=a(document).scrollTop()+80,d=a("#themify_lightbox_fa"),f=a("#themify_lightbox_overlay"),e=a("body");f.show();d.show().css("top",Themify_Icons.getDocHeight()).animate({top:h},800);if(b){a("a",d).removeClass("selected").find("."+b).closest("a").addClass("selected")}if(d.find("a.selected").length){var g=d.find("a.selected").closest(".tf-font-group").data("group");a('#themify_lightbox_fa .tf-icon-group-select input[value="'+g+'"]').click()}else{a("#themify_lightbox_fa .tf-icon-group-select input:first").click()}if(e.hasClass("themify_builder_active")&&e.hasClass("frontend")){var c=a("#themify_builder_overlay");if(c.length>0){f.insertAfter(c);d.insertAfter(c)}}a("#themify-search-icon-input").val("").trigger("keyup");a("#themify_lightbox_fa .themify-lightbox-icon").find(".selected").trigger("click")})},loadIconsList:function(b){if(a("#themify_lightbox_fa").length){b()}else{a.ajax({url:ajaxurl,data:{action:"tf_icon_picker"},type:"POST",success:function(c){a("body").append(c);b()}})}},setIcon:function(c){var b=a(Themify_Icons.target);b.val(c);if(a(".fa:not(.icon-close)",b.parent().parent()).length>0){a.ajax({url:ajaxurl,data:{action:"tf_get_icon",tf_icon:c},success:function(d){a(".fa:not(.icon-close)",b.parent().parent()).removeClass().addClass(d)}})}Themify_Icons.closeLightbox()},closeLightbox:function(){a("#themify_lightbox_fa").animate({top:Themify_Icons.getDocHeight()},800,function(){a("#themify_lightbox_overlay").hide();a("#themify_lightbox_fa").hide()})},Category:function(){a("body").delegate(".themify-lightbox-icon li","click",function(c){c.preventDefault();var b=a(this).closest(".themify-lightbox-icon").find(".selected");if(!a(this).hasClass("selected")){b.removeClass("selected");var d=a(this).data("id");if(a("#"+d).length>0){a(this).closest(".lightbox_container").find("section").not("#"+d).fadeOut("fast",function(){a("#"+d).fadeIn("normal")});a(this).addClass("selected")}}else{b.removeClass("selected");a(this).closest(".lightbox_container").find("section").fadeIn("fast",function(){a("#themify-search-icon-input").trigger("keyup")})}})},Search:function(){a.expr[":"].contains=a.expr.createPseudo(function(b){return function(c){return a(c).text().toUpperCase().indexOf(b.toUpperCase())>=0}});a("body").delegate("#themify-search-icon-input","keyup",function(){var b=a.trim(a(this).val()),d=a("#themify_lightbox_fa").find(".tf-font-group a"),c=a("#themify_lightbox_fa").find("section");if(b){d.hide();c.hide();d.filter(":contains("+b.toUpperCase()+")").show().each(function(){a(this).closest("section").show()})}else{c.show();d.show()}})}};if(typeof tbLoaderVars!=="undefined"){a("body").on("builderscriptsloaded.themify",Themify_Icons.init)}else{a(document).ready(Themify_Icons.init)}})(jQuery);