!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(j){function Q(g,m){var d=j('<div class="minicolors" />'),p=j.minicolors.defaults,k,e,b,h,f;if(!g.data("minicolors-initialized")){if(m=j.extend(!0,{},p,m),d.addClass("minicolors-theme-"+m.theme).toggleClass("minicolors-with-opacity",m.opacity).toggleClass("minicolors-no-data-uris",m.dataUris!==!0),void 0!==m.position&&j.each(m.position.split(" "),function(){d.addClass("minicolors-position-"+this)}),k="rgb"===m.format?m.opacity?"25":"20":m.keywords?"11":"7",g.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",m).prop("size",k).wrap(d).after('<div class="minicolors-panel minicolors-slider-'+m.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),m.inline||(g.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),g.next(".minicolors-input-swatch").on("click",function(a){a.preventDefault(),g.focus()})),h=g.parent().find(".minicolors-panel"),h.on("selectstart",function(){return !1}).end(),m.swatches&&0!==m.swatches.length){for(m.swatches.length>7&&(m.swatches.length=7),h.addClass("minicolors-with-swatches"),e=j('<ul class="minicolors-swatches"></ul>').appendTo(h),f=0;f<m.swatches.length;++f){b=m.swatches[f],b=T(b)?E(b,!0):A(J(b,!0)),j('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(e).data("swatch-color",m.swatches[f]).find(".minicolors-swatch-color").css({backgroundColor:z(b),opacity:b.a}),m.swatches[f]=b}}m.inline&&g.parent().addClass("minicolors-inline"),U(g,!1),g.data("minicolors-initialized",!0)}}function F(b){var a=b.parent();b.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),a.before(b).remove()}function K(d){var c=d.parent(),e=c.find(".minicolors-panel"),b=d.data("minicolors-settings");!d.data("minicolors-initialized")||d.prop("disabled")||c.hasClass("minicolors-inline")||c.hasClass("minicolors-focus")||(G(),c.addClass("minicolors-focus"),e.stop(!0,!0).fadeIn(b.showSpeed,function(){b.show&&b.show.call(d.get(0))}))}function G(){j(".minicolors-focus").each(function(){var b=j(this),a=b.find(".minicolors-input"),d=b.find(".minicolors-panel"),c=a.data("minicolors-settings");d.fadeOut(c.hideSpeed,function(){c.hide&&c.hide.call(a.get(0)),b.removeClass("minicolors-focus")})})}function Y(w,ac,k){var ad=w.parents(".minicolors").find(".minicolors-input"),aa=ad.data("minicolors-settings"),b=w.find("[class$=-picker]"),C=w.offset().left,Z=w.offset().top,v=Math.round(ac.pageX-C),x=Math.round(ac.pageY-Z),M=k?aa.animationSpeed:0,f,ab,y,n;ac.originalEvent.changedTouches&&(v=ac.originalEvent.changedTouches[0].pageX-C,x=ac.originalEvent.changedTouches[0].pageY-Z),0>v&&(v=0),0>x&&(x=0),v>w.width()&&(v=w.width()),x>w.height()&&(x=w.height()),w.parent().is(".minicolors-slider-wheel")&&b.parent().is(".minicolors-grid")&&(f=75-v,ab=75-x,y=Math.sqrt(f*f+ab*ab),n=Math.atan2(ab,f),0>n&&(n+=2*Math.PI),y>75&&(y=75,v=75-75*Math.cos(n),x=75-75*Math.sin(n)),v=Math.round(v),x=Math.round(x)),w.is(".minicolors-grid")?b.stop(!0).animate({top:x+"px",left:v+"px"},M,aa.animationEasing,function(){L(ad,w)}):b.stop(!0).animate({top:x+"px"},M,aa.animationEasing,function(){L(ad,w)})}function L(al,ae){function ah(b,a){var e,d;return b.length&&a?(e=b.offset().left,d=b.offset().top,{x:e-a.offset().left+b.outerWidth()/2,y:d-a.offset().top+b.outerHeight()/2}):null}var af,at,ai,ap,aj,am,aq,ag=al.val(),ad=al.attr("data-opacity"),an=al.parent(),ao=al.data("minicolors-settings"),ac=an.find(".minicolors-input-swatch"),ar=an.find(".minicolors-grid"),ab=an.find(".minicolors-slider"),C=an.find(".minicolors-opacity-slider"),ak=ar.find("[class$=-picker]"),m=ab.find("[class$=-picker]"),aa=C.find("[class$=-picker]"),Z=ah(ak,ar),c=ah(m,ab),r=ah(aa,C);if(ae.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(ao.control){case"wheel":ap=ar.width()/2-Z.x,aj=ar.height()/2-Z.y,am=Math.sqrt(ap*ap+aj*aj),aq=Math.atan2(aj,ap),0>aq&&(aq+=2*Math.PI),am>75&&(am=75,Z.x=69-75*Math.cos(aq),Z.y=69-75*Math.sin(aq)),at=N(am/0.75,0,100),af=N(180*aq/Math.PI,0,360),ai=N(100-Math.floor(c.y*(100/ab.height())),0,100),ag=H({h:af,s:at,b:ai}),ab.css("backgroundColor",H({h:af,s:at,b:100}));break;case"saturation":af=N(parseInt(Z.x*(360/ar.width()),10),0,360),at=N(100-Math.floor(c.y*(100/ab.height())),0,100),ai=N(100-Math.floor(Z.y*(100/ar.height())),0,100),ag=H({h:af,s:at,b:ai}),ab.css("backgroundColor",H({h:af,s:100,b:ai})),an.find(".minicolors-grid-inner").css("opacity",at/100);break;case"brightness":af=N(parseInt(Z.x*(360/ar.width()),10),0,360),at=N(100-Math.floor(Z.y*(100/ar.height())),0,100),ai=N(100-Math.floor(c.y*(100/ab.height())),0,100),ag=H({h:af,s:at,b:ai}),ab.css("backgroundColor",H({h:af,s:at,b:100})),an.find(".minicolors-grid-inner").css("opacity",1-ai/100);break;default:af=N(360-parseInt(c.y*(360/ab.height()),10),0,360),at=N(Math.floor(Z.x*(100/ar.width())),0,100),ai=N(100-Math.floor(Z.y*(100/ar.height())),0,100),ag=H({h:af,s:at,b:ai}),ar.css("backgroundColor",H({h:af,s:100,b:100}))}ad=ao.opacity?parseFloat(1-r.y/C.height()).toFixed(2):1,I(al,ag,ad)}else{ac.find("span").css({backgroundColor:ag,opacity:ad}),W(al,ag,ad)}}function I(d,c,g){var e,b=d.parent(),h=d.data("minicolors-settings"),f=b.find(".minicolors-input-swatch");h.opacity&&d.attr("data-opacity",g),"rgb"===h.format?(e=T(c)?E(c,!0):A(J(c,!0)),g=""===d.attr("data-opacity")?1:N(parseFloat(d.attr("data-opacity")).toFixed(2),0,1),(isNaN(g)||!h.opacity)&&(g=1),c=d.minicolors("rgbObject").a<=1&&e&&h.opacity?"rgba("+e.r+", "+e.g+", "+e.b+", "+parseFloat(g)+")":"rgb("+e.r+", "+e.g+", "+e.b+")"):(T(c)&&(c=B(c)),c=V(c,h.letterCase)),d.val(c),f.find("span").css({backgroundColor:c,opacity:g}),W(d,c,g)}function U(ae,v){var aa,C,ai,ab,Z,ag,ac,af,ah,k,f=ae.parent(),p=ae.data("minicolors-settings"),m=f.find(".minicolors-input-swatch"),d=f.find(".minicolors-grid"),g=f.find(".minicolors-slider"),u=f.find(".minicolors-opacity-slider"),w=d.find("[class$=-picker]"),c=g.find("[class$=-picker]"),ad=u.find("[class$=-picker]");switch(T(ae.val())?(aa=B(ae.val()),Z=N(parseFloat(D(ae.val())).toFixed(2),0,1),Z&&ae.attr("data-opacity",Z)):aa=V(J(ae.val(),!0),p.letterCase),aa||(aa=V(S(p.defaultValue,!0),p.letterCase)),C=P(aa),ab=p.keywords?j.map(p.keywords.split(","),function(a){return j.trim(a.toLowerCase())}):[],ag=""!==ae.val()&&j.inArray(ae.val().toLowerCase(),ab)>-1?V(ae.val()):T(ae.val())?E(ae.val()):aa,v||ae.val(ag),p.opacity&&(ai=""===ae.attr("data-opacity")?1:N(parseFloat(ae.attr("data-opacity")).toFixed(2),0,1),isNaN(ai)&&(ai=1),ae.attr("data-opacity",ai),m.find("span").css("opacity",ai),af=N(u.height()-u.height()*ai,0,u.height()),ad.css("top",af+"px")),"transparent"===ae.val().toLowerCase()&&m.find("span").css("opacity",0),m.find("span").css("backgroundColor",aa),p.control){case"wheel":ah=N(Math.ceil(0.75*C.s),0,d.height()/2),k=C.h*Math.PI/180,ac=N(75-Math.cos(k)*ah,0,d.width()),af=N(75-Math.sin(k)*ah,0,d.height()),w.css({top:af+"px",left:ac+"px"}),af=150-C.b/(100/d.height()),""===aa&&(af=0),c.css("top",af+"px"),g.css("backgroundColor",H({h:C.h,s:C.s,b:100}));break;case"saturation":ac=N(5*C.h/12,0,150),af=N(d.height()-Math.ceil(C.b/(100/d.height())),0,d.height()),w.css({top:af+"px",left:ac+"px"}),af=N(g.height()-C.s*(g.height()/100),0,g.height()),c.css("top",af+"px"),g.css("backgroundColor",H({h:C.h,s:100,b:C.b})),f.find(".minicolors-grid-inner").css("opacity",C.s/100);break;case"brightness":ac=N(5*C.h/12,0,150),af=N(d.height()-Math.ceil(C.s/(100/d.height())),0,d.height()),w.css({top:af+"px",left:ac+"px"}),af=N(g.height()-C.b*(g.height()/100),0,g.height()),c.css("top",af+"px"),g.css("backgroundColor",H({h:C.h,s:C.s,b:100})),f.find(".minicolors-grid-inner").css("opacity",1-C.b/100);break;default:ac=N(Math.ceil(C.s/(100/d.width())),0,d.width()),af=N(d.height()-Math.ceil(C.b/(100/d.height())),0,d.height()),w.css({top:af+"px",left:ac+"px"}),af=N(g.height()-C.h/(360/g.height()),0,g.height()),c.css("top",af+"px"),d.css("backgroundColor",H({h:C.h,s:100,b:100}))}ae.data("minicolors-initialized")&&W(ae,ag,ai)}function W(d,c,k){var f=d.data("minicolors-settings"),b=d.data("minicolors-lastChange"),l,g,h;if(!b||b.value!==c||b.opacity!==k){if(d.data("minicolors-lastChange",{value:c,opacity:k}),f.swatches&&0!==f.swatches.length){for(l=T(c)?E(c,!0):A(c),g=-1,h=0;h<f.swatches.length;++h){if(l.r===f.swatches[h].r&&l.g===f.swatches[h].g&&l.b===f.swatches[h].b&&l.a===f.swatches[h].a){g=h;break}}d.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==h&&d.parent().find(".minicolors-swatches .minicolors-swatch").eq(h).addClass("selected")}f.change&&(f.changeDelay?(clearTimeout(d.data("minicolors-changeTimeout")),d.data("minicolors-changeTimeout",setTimeout(function(){f.change.call(d.get(0),c,k)},f.changeDelay))):f.change.call(d.get(0),c,k)),d.trigger("change").trigger("input")}}function O(b){var a=J(j(b).val(),!0),d=A(a),c=j(b).attr("data-opacity");return d?(void 0!==c&&j.extend(d,{a:parseFloat(c)}),d):null}function R(d,c){var f=J(j(d).val(),!0),e=A(f),b=j(d).attr("data-opacity");return e?(void 0===b&&(b=1),c?"rgba("+e.r+", "+e.g+", "+e.b+", "+parseFloat(b)+")":"rgb("+e.r+", "+e.g+", "+e.b+")"):null}function V(b,a){return"uppercase"===a?b.toUpperCase():b.toLowerCase()}function J(b,a){return b=b.replace(/^#/g,""),b.match(/^[A-F0-9]{3,6}/gi)?3!==b.length&&6!==b.length?"":(3===b.length&&a&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]),"#"+b):""}function E(b,a){var d=b.replace(/[^\d,.]/g,""),c=d.split(",");return c[0]=N(parseInt(c[0],10),0,255),c[1]=N(parseInt(c[1],10),0,255),c[2]=N(parseInt(c[2],10),0,255),c[3]&&(c[3]=N(parseFloat(c[3],10),0,1)),a?{r:c[0],g:c[1],b:c[2],a:c[3]?c[3]:null}:"undefined"!=typeof c[3]&&c[3]<=1?"rgba("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+")":"rgb("+c[0]+", "+c[1]+", "+c[2]+")"}function S(b,a){return T(b)?E(b):J(b,a)}function N(b,a,c){return a>b&&(b=a),b>c&&(b=c),b}function T(b){var a=b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return a&&4===a.length?!0:!1}function D(a){return a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i),a&&6===a.length?a[4]:"1"}function X(d){var c={},k=Math.round(d.h),f=Math.round(255*d.s/100),b=Math.round(255*d.b/100);if(0===f){c.r=c.g=c.b=b}else{var l=b,g=(255-f)*b/255,h=(l-g)*(k%60)/60;360===k&&(k=0),60>k?(c.r=l,c.b=g,c.g=g+h):120>k?(c.g=l,c.b=g,c.r=l-h):180>k?(c.g=l,c.r=g,c.b=g+h):240>k?(c.b=l,c.r=g,c.g=l-h):300>k?(c.b=l,c.g=g,c.r=g+h):360>k?(c.r=l,c.g=g,c.b=l-h):(c.r=0,c.g=0,c.b=0)}return{r:Math.round(c.r),g:Math.round(c.g),b:Math.round(c.b)}}function B(a){return a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),a&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""}function z(b){var a=[b.r.toString(16),b.g.toString(16),b.b.toString(16)];return j.each(a,function(c,d){1===d.length&&(a[c]="0"+d)}),"#"+a.join("")}function H(a){return z(X(a))}function P(b){var a=q(A(b));return 0===a.s&&(a.h=360),a}function q(d){var c={h:0,s:0,b:0},f=Math.min(d.r,d.g,d.b),e=Math.max(d.r,d.g,d.b),b=e-f;return c.b=e,c.s=0!==e?255*b/e:0,0!==c.s?d.r===e?c.h=(d.g-d.b)/b:d.g===e?c.h=2+(d.b-d.r)/b:c.h=4+(d.r-d.g)/b:c.h=-1,c.h*=60,c.h<0&&(c.h+=360),c.s*=100/255,c.b*=100/255,c}function A(a){return a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16),{r:a>>16,g:(65280&a)>>8,b:255&a}}j.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}},j.extend(j.fn,{minicolors:function(b,c){switch(b){case"destroy":return j(this).each(function(){F(j(this))}),j(this);case"hide":return G(),j(this);case"opacity":return void 0===c?j(this).attr("data-opacity"):(j(this).each(function(){U(j(this).attr("data-opacity",c))}),j(this));case"rgbObject":return O(j(this),"rgbaObject"===b);case"rgbString":case"rgbaString":return R(j(this),"rgbaString"===b);case"settings":return void 0===c?j(this).data("minicolors-settings"):(j(this).each(function(){var a=j(this).data("minicolors-settings")||{};F(j(this)),j(this).minicolors(j.extend(!0,a,c))}),j(this));case"show":return K(j(this).eq(0)),j(this);case"value":return void 0===c?j(this).val():(j(this).each(function(){"object"==typeof c&&null!==typeof c?(c.opacity&&j(this).attr("data-opacity",N(c.opacity,0,1)),c.color&&j(this).val(c.color)):j(this).val(c),U(j(this))}),j(this));default:return"create"!==b&&(c=b),j(this).each(function(){Q(j(this),c)}),j(this)}}}),j(document).on("mousedown.minicolors touchstart.minicolors",function(a){j(a.target).parents().add(a.target).hasClass("minicolors")||G()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(b){var a=j(this);b.preventDefault(),j(document).data("minicolors-target",a),Y(a,b,!0)}).on("mousemove.minicolors touchmove.minicolors",function(b){var a=j(document).data("minicolors-target");a&&Y(a,b)}).on("mouseup.minicolors touchend.minicolors",function(){j(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(b){b.preventDefault();var a=j(this),d=a.parents(".minicolors").find(".minicolors-input"),c=a.data("swatch-color");I(d,c,D(c)),U(d)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(b){var a=j(this).parent().find(".minicolors-input");b.preventDefault(),K(a)}).on("focus.minicolors",".minicolors-input",function(){var a=j(this);a.data("minicolors-initialized")&&K(a)}).on("blur.minicolors",".minicolors-input",function(){var d=j(this),c=d.data("minicolors-settings"),g,e,b,h,f;d.data("minicolors-initialized")&&(g=c.keywords?j.map(c.keywords.split(","),function(a){return j.trim(a.toLowerCase())}):[],""!==d.val()&&j.inArray(d.val().toLowerCase(),g)>-1?f=d.val():(T(d.val())?b=E(d.val(),!0):(e=J(d.val(),!0),b=e?A(e):null),f=null===b?c.defaultValue:"rgb"===c.format?E(c.opacity?"rgba("+b.r+","+b.g+","+b.b+","+d.attr("data-opacity")+")":"rgb("+b.r+","+b.g+","+b.b+")"):z(b)),h=c.opacity?d.attr("data-opacity"):1,"transparent"===f.toLowerCase()&&(h=0),d.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",h),d.val(f),""===d.val()&&d.val(S(c.defaultValue,!0)),d.val(V(d.val(),c.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(b){var a=j(this);if(a.data("minicolors-initialized")){switch(b.keyCode){case 9:G();break;case 13:case 27:G(),a.blur()}}}).on("keyup.minicolors",".minicolors-input",function(){var a=j(this);a.data("minicolors-initialized")&&U(a,!0)}).on("paste.minicolors",".minicolors-input",function(){var a=j(this);a.data("minicolors-initialized")&&setTimeout(function(){U(a,!0)},1)})});