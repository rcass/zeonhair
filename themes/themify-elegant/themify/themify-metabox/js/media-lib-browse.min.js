var themifyMediaLib={};(function(a){themifyMediaLib={init:function(){this.mediaUploader()},mediaUploader:function(){var b="",c=wp.media.model.settings.post.id;a(".themify-media-lib-browse").on("click",function(g){var e=a(this),d=e.data("submit"),f=e.data("type");b=wp.media.frames.file_frame=wp.media({title:a(this).data("uploader-title"),library:{type:f},button:{text:a(this).data("uploader-button-text")},multiple:false});b.on("select",function(){var i=b.state().get("selection").first().toJSON();d.attach_id=i.id;var h=e.data("fields");a("#"+h).val(i.url);a("body").trigger("themify_metabox_lib_selected",[e,i,b]);if(f=="image"){a.ajax({type:"POST",url:ajaxurl,data:d,dataType:"json",success:function(j){themifyMediaLib.setPreviewIcon(e.closest(".themify_field_row"),j.thumb)}})}});b.open();g.preventDefault()})},setPreviewIcon:function(d,b){var c=a('<a href="'+b+'" target="_blank"><img src="'+b+'" width="40" /></a>').fadeIn(1000).css("display","inline-block");if(d.find(".themify_upload_preview").find("a").length>0){d.find(".themify_upload_preview").find("a").remove()}d.find(".themify_upload_preview").fadeIn().append(c);d.find(".themify_featimg_remove").removeClass("hide")}};a(document).ready(function(){themifyMediaLib.init()})})(jQuery);